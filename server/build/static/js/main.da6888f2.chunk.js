(this["webpackJsonpreact-epub-viewer"]=this["webpackJsonpreact-epub-viewer"]||[]).push([[0],{149:function(e,t,n){},167:function(e,t,n){"use strict";n.r(t);var i,r,o,c,a,l,s,u,d,b=n(36),f=n.n(b),p=n(21),g=n.n(p),h=n(39),j=n(10),x=n(2),O=n.n(x),v=n(50),m=n.n(v),w=n(11),y=n(71),k=n(4),C=n(5),_={white:"#ffffff",black:"#000000",gray0:"#fafafa",gray1:"#e7e7e7",gray2:"#c3c3c3",gray3:"#9e9e9e",gray4:"#868686",gray5:"#656565",gray6:"#505050",gray7:"#3c3c3c",gray8:"#282828",red0:"#ffe8e8",red1:"#ffd0d1",red2:"#ff8a8b",red3:"#ff4445",red4:"#ff1517",red5:"#bf1011",red6:"#990d0e",red7:"#73090a",red8:"#4d0607",orange0:"#fff0ec",orange1:"#ffe2d9",orange2:"#ffb6a0",orange3:"#ff8966",orange4:"#ff6c40",orange5:"#bf5130",orange6:"#994126",orange7:"#73311d",orange8:"#4d2013",yellow0:"#fffce6",yellow1:"#fffacc",yellow2:"#fff280",yellow3:"#feea33",yellow4:"#fee500",yellow5:"#bfac00",yellow6:"#988900",yellow7:"#726700",yellow8:"#4c4500",green0:"#e6f7e6",green1:"#cdefcc",green2:"#83d880",green3:"#39c133",green4:"#07b100",green5:"#058500",green6:"#046a00",green7:"#035000",green8:"#023500",blue0:"#ebf1ff",blue1:"#d7e3ff ",blue2:"#9cb9ff ",blue3:"#618eff ",blue4:"#3972ff ",blue5:"#2b56bf ",blue6:"#224499 ",blue7:"#1a3373 ",blue8:"#11224d ",purple0:"#f2ebff",purple1:"#d7e3ff",purple2:"#be9cff",purple3:"#9761ff",purple4:"#7d39ff",purple5:"#5e2bbf",purple6:"#4b2299",purple7:"#381a73",purple8:"#26114d"},B=function(e){return"\n\t".concat(e,"\n")},S={header:B(5),menu:B(10),modal:B(100),snackbar:B(400),tooltip:B(500)},E=C.b.div(i||(i=Object(k.a)(["\n  position: sticky;\n  width: 100%;\n  height: auto;\n  left: 0;\n  top: 0;\n  background-color: ",";\n  z-index: ",";\n"])),_.white,S.header),H=C.b.div(r||(r=Object(k.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 64px;\n  z-index: ",";\n"])),S.header),R=C.b.div(o||(o=Object(k.a)(["\n  width: 100%;\n  flex-grow: 1;\n  display: flex;\n  justify-content: space-between;\n  border-bottom: 2px solid ",";\n\n  & > div {\n    display: flex;\n    align-items: center;\n    justify-content: flex-start;\n  }\n  & > div:last-child {\n    margin-right: 8px;\n  }\n"])),_.gray1),z=H,V=function(){return"\n\tcubic-bezier(0.25, 0.1, 0.25, 1);\n"},T="0px 8px 12px rgba(0, 0, 0, 0.2)",L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;return"\n\t&::-webkit-scrollbar {\n\t\twidth: ".concat(e,"px;\n\t\tbackground: transparent;\n\t}\n\t&::-webkit-scrollbar-thumb {\n\t\tbackground: #ddd;\n\t\tborder-radius: 10px;\n\t}\n\t&::-webkit-scrollbar-thumb:hover {\n\t\tbackground: #ccc;\n\t}\n\t&::-webkit-scrollbar-track {\n\t\tbackground: transparent;\n\t}\n")},I=function(e){return"\n\t@media (max-width: ".concat(e,"px)\n")},M=1440,N=1200,P=702,W=350,F={xlarge:I(1600),large:I(M),medium:I(N),small:I(P),xsmall:I(W),custom:I},A=n(0),X=C.b.a(c||(c=Object(k.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  outline: none;\n  margin-left: 16px;\n  background-color: rgba(0, 0, 0, 0);\n  transition: 0.2s ",";\n  border-radius: 8px;\n  padding: 4px 8px;\n  cursor: pointer;\n\n  "," {\n    display: none;\n  }\n\n  &:focus,\n  &:hover {\n    background-color: ",";\n  }\n"])),V,I(700),_.blue0),D=C.b.img(a||(a=Object(k.a)(["\n  height: 44px;\n"]))),q=C.b.h2(l||(l=Object(k.a)(['\n  margin-left: 20px;\n  margin-top: 20px;\n  font-size: 20px;\n  align-self: center;\n  font-family: "Poppins", sans-serif;\n']))),Y=function(e){var t=e.bookTitle;return Object(A.jsxs)(X,{href:"https://pustaka.co.in",target:"__blank__",children:[Object(A.jsx)(D,{src:"https://www.pustaka.co.in/mgmt/assets/img/login_logo.png",alt:"Logo"}),Object(A.jsx)(q,{children:t||"Book Title"})]})},U=C.b.button(s||(s=Object(k.a)(["\n  height: 100%;\n  padding: 0 16px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: .1s ",";\n  outline: none;\n\n  &:focus, &:hover {\n    color: ",";\n  }\n\n  &:first-child {\n    margin-left: 8px;\n  }\n"])),V,_.blue3),G=function(e){var t=e.message,n=e.onClick;return Object(A.jsx)(U,{onClick:function(){return n()},children:t})},J=function(e){var t=e.onNavToggle,n=e.onOptionToggle,i=(e.onLearningToggle,e.bookTitle);return Object(A.jsx)(E,{children:Object(A.jsx)(z,{children:Object(A.jsxs)(R,{children:[Object(A.jsx)(Y,{bookTitle:i}),Object(A.jsxs)("div",{children:[Object(A.jsx)(G,{message:"Table of Contents",onClick:t}),Object(A.jsx)(G,{message:"Setting",onClick:n})]})]})})})},Z=C.b.div(u||(u=Object(k.a)(["\n  position: fixed;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  height: 60px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: ",";\n"])),_.white),K=C.b.div(d||(d=Object(k.a)(["\n  height: 100%;\n  flex-basis: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n\n  & > span {\n    color: ",";\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n"])),_.gray4),Q=function(e){var t=e.text;return Object(A.jsx)(K,{children:Object(A.jsx)("span",{children:t})})},$=n(6);var ee=function(e){return Object(A.jsxs)("svg",Object($.a)(Object($.a)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 44 44"},e),{},{children:[Object(A.jsx)("defs",{children:Object(A.jsx)("style",{children:".prev_svg__cls-3{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px}"})}),Object(A.jsx)("g",{id:"prev_svg__\\uB808\\uC774\\uC5B4_2","data-name":"\\uB808\\uC774\\uC5B4 2",children:Object(A.jsxs)("g",{id:"prev_svg__\\uB808\\uC774\\uC5B4_1-2","data-name":"\\uB808\\uC774\\uC5B4 1",children:[Object(A.jsx)("path",{fill:"none",d:"M0 0h44v44H0z",opacity:.3}),Object(A.jsx)("path",{className:"prev_svg__cls-3",d:"M12 22L32 2M12 22l20 20"})]})})]}))};var te=function(e){return Object(A.jsxs)("svg",Object($.a)(Object($.a)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 44 44"},e),{},{children:[Object(A.jsx)("defs",{children:Object(A.jsx)("style",{children:".next_svg__cls-3{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px}"})}),Object(A.jsx)("g",{id:"next_svg__\\uB808\\uC774\\uC5B4_2","data-name":"\\uB808\\uC774\\uC5B4 2",children:Object(A.jsxs)("g",{id:"next_svg__\\uB808\\uC774\\uC5B4_1-2","data-name":"\\uB808\\uC774\\uC5B4 1",children:[Object(A.jsx)("path",{fill:"none",d:"M0 0h44v44H0z",opacity:.3}),Object(A.jsx)("path",{className:"next_svg__cls-3",d:"M32 22L12 2M32 22L12 42"})]})})]}))};var ne=function(e){return Object(A.jsxs)("svg",Object($.a)(Object($.a)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48"},e),{},{children:[Object(A.jsx)("defs",{children:Object(A.jsx)("style",{children:".bookClose_svg__cls-3{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px}"})}),Object(A.jsx)("g",{id:"bookClose_svg__\\uB808\\uC774\\uC5B4_2","data-name":"\\uB808\\uC774\\uC5B4 2",children:Object(A.jsxs)("g",{id:"bookClose_svg__\\uB808\\uC774\\uC5B4_1-2","data-name":"\\uB808\\uC774\\uC5B4 1",children:[Object(A.jsx)("path",{fill:"none",d:"M0 0h48v48H0z",opacity:.2}),Object(A.jsx)("path",{className:"bookClose_svg__cls-3",d:"M37.12 3H10.88a3 3 0 00-.43 0A1.71 1.71 0 009.1 4.11a1.87 1.87 0 00-.1.59v29.18c0 1 0 .94 1.88 1.88l18 9a1.8 1.8 0 002.6-1.2 3 3 0 000-.31v-7.58h5.62A1.88 1.88 0 0039 33.8V4.87A1.88 1.88 0 0037.12 3z"}),Object(A.jsx)("path",{className:"bookClose_svg__cls-3",d:"M31.5 35.67V14.84a2 2 0 00-1.1-1.78L10.45 3"})]})})]}))};var ie=function(e){return Object(A.jsxs)("svg",Object($.a)(Object($.a)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48"},e),{},{children:[Object(A.jsx)("defs",{children:Object(A.jsx)("style",{children:".bookOpen_svg__cls-3{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px}"})}),Object(A.jsx)("g",{id:"bookOpen_svg__\\uB808\\uC774\\uC5B4_2","data-name":"\\uB808\\uC774\\uC5B4 2",children:Object(A.jsxs)("g",{id:"bookOpen_svg__\\uB808\\uC774\\uC5B4_1-2","data-name":"\\uB808\\uC774\\uC5B4 1",children:[Object(A.jsx)("path",{fill:"none",d:"M0 0h48v48H0z",opacity:.2}),Object(A.jsx)("path",{className:"bookOpen_svg__cls-3",d:"M4 6.5a27.24 27.24 0 0120 1v34a27.24 27.24 0 00-20-1zM24 7.5a27.24 27.24 0 0120-1v34a27.24 27.24 0 00-20 1"})]})})]}))};var re=function(e){return Object(A.jsxs)("svg",Object($.a)(Object($.a)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48"},e),{},{children:[Object(A.jsx)("defs",{children:Object(A.jsx)("style",{children:".close_svg__cls-3{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px}"})}),Object(A.jsx)("g",{id:"close_svg__\\uB808\\uC774\\uC5B4_2","data-name":"\\uB808\\uC774\\uC5B4 2",children:Object(A.jsxs)("g",{id:"close_svg__\\uB808\\uC774\\uC5B4_1-2","data-name":"\\uB808\\uC774\\uC5B4 1",children:[Object(A.jsx)("path",{fill:"none",d:"M0 0h48v48H0z",opacity:.2}),Object(A.jsx)("path",{className:"close_svg__cls-3",d:"M4 4l40 40M4 44L44 4"})]})})]}))};var oe=function(e){return Object(A.jsxs)("svg",Object($.a)(Object($.a)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48"},e),{},{children:[Object(A.jsx)("defs",{children:Object(A.jsx)("style",{children:".scrollHorizontal_svg__cls-3{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px}"})}),Object(A.jsx)("g",{id:"scrollHorizontal_svg__\\uB808\\uC774\\uC5B4_2","data-name":"\\uB808\\uC774\\uC5B4 2",children:Object(A.jsxs)("g",{id:"scrollHorizontal_svg__\\uB808\\uC774\\uC5B4_1-2","data-name":"\\uB808\\uC774\\uC5B4 1",children:[Object(A.jsx)("path",{fill:"none",d:"M0 0h48v48H0z",opacity:.2}),Object(A.jsx)("circle",{className:"scrollHorizontal_svg__cls-3",cx:24,cy:24,r:5}),Object(A.jsx)("path",{className:"scrollHorizontal_svg__cls-3",d:"M3 24l12-12M3 24l12 12M45 24L33 12M45 24L33 36"})]})})]}))};var ce=function(e){return Object(A.jsxs)("svg",Object($.a)(Object($.a)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48"},e),{},{children:[Object(A.jsx)("defs",{children:Object(A.jsx)("style",{children:".scrollVertical_svg__cls-3{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px}"})}),Object(A.jsx)("g",{id:"scrollVertical_svg__\\uB808\\uC774\\uC5B4_2","data-name":"\\uB808\\uC774\\uC5B4 2",children:Object(A.jsxs)("g",{id:"scrollVertical_svg__\\uB808\\uC774\\uC5B4_1-2","data-name":"\\uB808\\uC774\\uC5B4 1",children:[Object(A.jsx)("path",{fill:"none",d:"M0 0h48v48H0z",opacity:.2}),Object(A.jsx)("circle",{className:"scrollVertical_svg__cls-3",cx:24,cy:24,r:5}),Object(A.jsx)("path",{className:"scrollVertical_svg__cls-3",d:"M24 3l12 12M24 3L12 15M24 45l12-12M24 45L12 33"})]})})]}))};var ae,le,se,ue,de,be,fe,pe,ge,he,je,xe,Oe,ve,me,we,ye,ke,Ce,_e,Be,Se,Ee,He,Re,ze,Ve,Te,Le,Ie=C.b.button(ae||(ae=Object(k.a)(["\n  min-width: 60px;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  outline: none;\n\n  &:focus,\n  &:hover {\n    filter: invert(40%) sepia(85%) saturate(1256%) hue-rotate(210deg)\n      brightness(113%) contrast(101%);\n  }\n"]))),Me=C.b.div(le||(le=Object(k.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: 0.1s ",";\n\n  & > svg {\n    width: 18px;\n    height: 18px;\n  }\n"])),V),Ne=function(e){var t=e.type,n=e.onClick,i="PREV"===t?ee:te,r="PREV"===t?"\uc774\uc804 \ud398\uc774\uc9c0":"\ub2e4\uc74c \ud398\uc774\uc9c0";return Object(A.jsx)(Ie,{onClick:n,title:r,children:Object(A.jsx)(Me,{children:Object(A.jsx)(i,{})})})},Pe=function(e){var t=e.title,n=e.nowPage,i=e.totalPage,r=e.onPageMove;return Object(A.jsxs)(Z,{children:[Object(A.jsx)(Ne,{type:"PREV",onClick:function(){return r("PREV")}}),Object(A.jsx)(Q,{text:t}),Object(A.jsx)(Q,{text:"".concat(n," / ").concat(i)}),Object(A.jsx)(Ne,{type:"NEXT",onClick:function(){return r("NEXT")}})]})},We=C.b.button(se||(se=Object(k.a)(["\n  position: relative;\n  height: 100%;\n  padding: 0 24px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: .1s ",";\n  outline: none;\n\n  &:focus, &:hover {\n    filter: invert(40%) sepia(85%) saturate(1256%) hue-rotate(210deg) brightness(113%) contrast(101%);\n  }\n"])),V),Fe=Object(C.b)(re)(ue||(ue=Object(k.a)(["\n  width: 18px;\n  height: 18px;\n"]))),Ae=function(e){var t=e.onClick;return Object(A.jsx)(We,{onClick:t,children:Object(A.jsx)(Fe,{})})},Xe=function(e,t){var n=e.title,i=e.show,r=e.onClose,o=e.children;return Object(A.jsxs)(De,{show:i,ref:t,children:[Object(A.jsxs)(qe,{children:[Object(A.jsx)("span",{children:n}),Object(A.jsx)(Ae,{onClick:r})]}),o]})},De=C.b.div(de||(de=Object(k.a)(["\n  display: flex;\n  flex-direction: column;\n  position: fixed;\n  width: 340px;\n  max-width: 95vw;\n  height: 100vh;\n  top: 0;\n  right: 0;\n  z-index: ",";\n  box-shadow: -4px 0 8px 0 rgba(0,0,0,.16);\n  background-color: ",";\n  border-radius: 16px 0 0 16px;\n  transform: ",";\n  transition: .4s ",";\n  overflow-y: auto;\n  ",";\n"])),S.menu,_.white,(function(e){return e.show?"translateX(0px) scale(1)":"translateX(420px) scale(.9)"}),V,L(0)),qe=C.b.div(be||(be=Object(k.a)(["\n  width: 100%;\n  min-height: 64px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding-top: 4px;\n\n  & > span {\n    padding-left: 24px;\n    font-size: 21px;\n    font-weight: 600;\n  }\n"]))),Ye=O.a.forwardRef(Xe),Ue=C.b.div(fe||(fe=Object(k.a)(["\n  display: flex;\n  padding: 24px;\n"]))),Ge=C.b.img(pe||(pe=Object(k.a)(["\n  margin-right: 12px;\n  width: 44%;\n  min-width: 120px;\n  border-radius: 4px;\n  background: #eee;\n"]))),Je=C.b.div(ge||(ge=Object(k.a)(["\n  flex-grow: 1;\n"]))),Ze=C.b.div(he||(he=Object(k.a)(["\n  font-weight: 500;\n  margin-bottom: 4px;\n"]))),Ke=C.b.div(je||(je=Object(k.a)(["\n  font-size: 14px;\n  margin-bottom: 4px;\n"]))),Qe=function(e){var t=e.src,n=void 0===t?"":t,i=e.title,r=e.publisher,o=e.author;return Object(A.jsxs)(Ue,{children:[Object(A.jsx)(Ge,{src:n,alt:i}),Object(A.jsxs)(Je,{children:[Object(A.jsx)(Ze,{children:i}),Object(A.jsx)(Ke,{children:r}),Object(A.jsx)(Ke,{children:o})]})]})},$e=C.b.button(xe||(xe=Object(k.a)(["\n  width: 100%;\n  height: 48px;\n  box-sizing: border-box;\n  padding: 12px 24px;\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  background-color: ",";\n  outline: none;\n  \n  & > span {\n    transition: .2s ",";\n    font-size: 14px;\n  }\n\n  &:focus, &:hover {\n    & > span {\n      color: ",";\n      margin-left: 12px;\n    }\n  }\n\n  &:last-child {\n    margin-bottom: 32px;\n  }\n"])),_.gray0,V,_.blue3),et=function(e){var t=e.message,n=e.onClick;return Object(A.jsx)($e,{onClick:n,children:Object(A.jsx)("span",{children:t})})},tt=function(e,t){var n=e.control,i=e.onToggle,r=e.onLocation,o=Object(w.c)((function(e){return e.book.book})),c=Object(w.c)((function(e){return e.book.toc})),a=c.map((function(e,t){return Object(A.jsx)(et,{message:e.label,onClick:function(){return t=e.href,r(t),void i();var t}},t)}));return Object(A.jsx)(A.Fragment,{children:n.display&&Object(A.jsxs)(Ye,{title:"Table of Contents",show:n.open,onClose:i,ref:t,children:[Object(A.jsx)(Qe,{src:o.coverURL,title:o.title,publisher:o.publisher,author:o.author}),a]})})},nt=O.a.forwardRef(tt),it=C.b.div(Oe||(Oe=Object(k.a)(["\n  box-sizing: border-box;\n  padding: 24px;\n"]))),rt=C.b.div(ve||(ve=Object(k.a)(["\n  margin-bottom: 24px;\n"]))),ot=C.b.div(me||(me=Object(k.a)(["\n  font-size: 14px;\n  font-weight: 500;\n  margin-bottom: 16px;\n"]))),ct=C.b.span(we||(we=Object(k.a)(["\n  display: inline-block;\n  font-size: 14px;\n  color: ",";\n  margin-right: 8px;\n  width: 40px;\n  text-align: right;\n  line-height: 20px;\n"])),(function(e){return e.active?_.blue3:_.gray4})),at=C.b.div(ye||(ye=Object(k.a)(["\n  flex-grow: 1;\n  display: flex;\n  position: relative;\n  width: auto;\n"]))),lt=C.b.div(ke||(ke=Object(k.a)(["\n  position: absolute;\n  width: 100%;\n  height: 6px;\n  background-color: #eee;\n  border-radius: 6px;\n  z-index: 0;\n"]))),st=C.b.div(Ce||(Ce=Object(k.a)(["\n  position: absolute;\n  top: 50%;\n  left: 0;\n  transform: translateY(-50%);\n  width: ",";\n  height: 6px;\n  border-radius: 6px 0 0 6px;\n  background-color: ",";\n\tz-index: 1;\n"])),(function(e){return e.percentage+"%"}),(function(e){return e.active?_.blue4:_.gray2})),ut=C.b.input(_e||(_e=Object(k.a)(["\n  appearance: none;\n  width: 100%;\n  height: 6px;\n  background-color: transparent;\n  border-radius: 6px;\n  margin: 0;\n  z-index: 2;\n  outline: none;\n  \n  &::-webkit-slider-thumb {\n    appearance: none;\n    width: 18px;\n    height: 18px;\n    border-radius: 18px;\n    box-shadow: ",";\n    background-color: white;\n    transition: .2s ",";\n    transition-property: box-shadow, background-color;\n    border: ",";\n    cursor: ",";;\n\n    &:hover {\n      background-color: ",";\n    }\n\n    &:active {\n      box-shadow: none;\n      background-color: ",";\n    }\n  }\n\n  &:focus::-webkit-slider-thumb {\n    box-shadow: none;\n    background-color: ",";\n  }\n"])),T,V,(function(e){return e.active?"2px solid ".concat(_.blue3):"2px solid ".concat(_.gray4)}),(function(e){return e.active?"pointer":""}),(function(e){return e.active?_.blue1:""}),(function(e){return e.active?_.blue3:""}),_.blue3),dt=C.b.span(Be||(Be=Object(k.a)(["\n  font-size: 12px;\n  font-weight: 500;\n  color: ",";\n  margin: 0 8px;\n  line-height: 20px;\n"])),_.gray4),bt=function(e){var t=e.active,n=e.minValue,i=e.maxValue,r=e.defaultValue,o=e.step,c=e.onChange,a=Math.round((r-n)/(i-n)*100);return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(dt,{children:"-"}),Object(A.jsxs)(at,{children:[Object(A.jsx)(lt,{}),Object(A.jsx)(st,{active:t,percentage:a}),Object(A.jsx)(ut,{type:"range",min:n,max:i,defaultValue:r,step:o,onChange:c,active:t,disabled:!t})]}),Object(A.jsx)(dt,{children:"+"})]})},ft=C.b.div(Se||(Se=Object(k.a)(["\n  display: flex;\n  align-items: center;\n  height: 20px;\n"]))),pt=function(e){var t=e.active,n=e.title,i=e.minValue,r=e.maxValue,o=e.defaultValue,c=e.step,a=e.onChange;return Object(A.jsxs)(rt,{children:[Object(A.jsx)(ot,{children:n}),Object(A.jsxs)(ft,{children:[Object(A.jsx)(ct,{active:t,children:o}),Object(A.jsx)(bt,{active:t,minValue:i,maxValue:r,defaultValue:o,step:c,onChange:function(e){t&&a(e)}})]})]})},gt=C.b.div(Ee||(Ee=Object(k.a)(["\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-around;\n\tpadding: 8px 0;\n"]))),ht=function(e){var t=e.title,n=e.children;return Object(A.jsxs)(rt,{children:[Object(A.jsx)(ot,{children:t}),Object(A.jsx)(gt,{children:n})]})},jt=C.b.button(He||(He=Object(k.a)(["\n  position: relative;\n  height: 100%;\n  padding: 0 12px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 0;\n  transition: .3s ",";\n  opacity: ",";\n  cursor: ",";\n  outline: none;\n\n  &::before {\n    content: '';\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    margin: auto;\n    z-index: -1;\n    border-radius: 30px;\n    width: ",";\n    height: ",";\n    opacity: ",";\n    transition: .1s ",";\n    background-color: ",";\n  }\n\n  &:focus, &:hover {\n    ",";\n    \n  }\n"])),V,(function(e){return e.active?"1":".3"}),(function(e){return e.active?"pointer":"default"}),(function(e){return e.isSelected?"32px":"8px"}),(function(e){return e.isSelected?"32px":"8px"}),(function(e){var t=e.active,n=e.isSelected;return t&&n?".7":"0"}),V,_.blue1,(function(e){return e.active?Object(C.a)(Re||(Re=Object(k.a)(["\n        &:before {\n          width: 32px;\n          height: 32px;\n          opacity: 1;\n        }\n      "]))):""})),xt=C.b.div(ze||(ze=Object(k.a)(["\n  width: 16px;\n  height: 16px;\n\n  & > div, & > svg {\n    width: 16px;\n    height: 16px;\n  }\n"]))),Ot=function(e){var t=e.type,n=e.alt,i=e.active,r=e.isSelected,o=e.onClick,c=null;switch(t){case"ScrollVertical":c=ce;break;case"ScrollHorizontal":c=oe;break;case"BookOpen":c=ie;break;case"BookClose":c=ne}return Object(A.jsx)(jt,{onClick:function(){i&&o()},isSelected:r,active:i,title:n,children:Object(A.jsx)(xt,{children:Object(A.jsx)(c,{})})})},vt=function(e,t){var n=e.control,i=e.bookStyle,r=e.bookOption,o=e.bookFlow,c=e.onToggle,a=e.emitEvent,l=e.onBookStyleChange,s=e.onBookOptionChange,u=Object(x.useState)(i.fontSize),d=Object(j.a)(u,2),b=d[0],f=d[1],p=Object(x.useState)(i.lineHeight),g=Object(j.a)(p,2),h=g[0],O=g[1],v=Object(x.useState)(i.marginHorizontal),m=Object(j.a)(v,2),w=m[0],y=m[1],k=Object(x.useState)(i.marginVertical),C=Object(j.a)(k,2),_=C[0],B=C[1],S=Object(x.useState)(!0),E=Object(j.a)(S,2),H=E[0],R=E[1],z=Object(x.useState)({active:!0,spread:!0}),V=Object(j.a)(z,2),T=V[0],L=V[1],I=function(e,t){if(t&&t.target)switch(e){case"FontSize":f(t.target.value);break;case"LineHeight":O(t.target.value);break;case"MarginHorizontal":y(t.target.value);break;case"MarginVertical":B(t.target.value)}},M=function(e){"Horizontal"===e?(R(!0),L(Object($.a)(Object($.a)({},T),{},{active:!0})),s(Object($.a)(Object($.a)({},r),{},{flow:"paginated"}))):(R(!1),L(Object($.a)(Object($.a)({},T),{},{active:!1})),s(Object($.a)(Object($.a)({},r),{},{flow:"scrolled-doc"})))},N=function(e){e?(L(Object($.a)(Object($.a)({},T),{},{spread:!0})),s(Object($.a)(Object($.a)({},r),{},{spread:"auto"}))):(L(Object($.a)(Object($.a)({},T),{},{spread:!1})),s(Object($.a)(Object($.a)({},r),{},{spread:"none"})))};return Object(x.useEffect)((function(){var e=window.setTimeout((function(){l({fontSize:b,lineHeight:h,marginHorizontal:w,marginVertical:_})}),250);return function(){return window.clearTimeout(e)}}),[b,h,w,_]),Object(x.useEffect)((function(){return a()}),[i,a]),Object(A.jsx)(A.Fragment,{children:n.display&&Object(A.jsx)(Ye,{title:"Setting",show:n.open,onClose:c,ref:t,children:Object(A.jsxs)(it,{children:[Object(A.jsxs)(ht,{title:"View Direction",children:[Object(A.jsx)(Ot,{type:"ScrollHorizontal",alt:"Horizontal View",active:!0,isSelected:H,onClick:function(){return M("Horizontal")}}),Object(A.jsx)(Ot,{type:"ScrollVertical",alt:"Vertical View",active:!0,isSelected:!H,onClick:function(){return M("Vertical")}})]}),Object(A.jsxs)(ht,{title:"View Spread",children:[Object(A.jsx)(Ot,{type:"BookOpen",alt:"Two Page View",active:T.active,isSelected:T.spread,onClick:function(){return N(!0)}}),Object(A.jsx)(Ot,{type:"BookClose",alt:"One Page View",active:T.active,isSelected:!T.spread,onClick:function(){return N(!1)}})]}),Object(A.jsx)(pt,{active:!0,title:"Size",minValue:8,maxValue:36,defaultValue:b,step:1,onChange:function(e){return I("FontSize",e)}}),Object(A.jsx)(pt,{active:!0,title:"Line height",minValue:1,maxValue:3,defaultValue:h,step:.1,onChange:function(e){return I("LineHeight",e)}}),Object(A.jsx)(pt,{active:!0,title:"Horizontal margin",minValue:0,maxValue:100,defaultValue:w,step:1,onChange:function(e){return I("MarginHorizontal",e)}}),Object(A.jsx)(pt,{active:"paginated"===o,title:"Vertical margin",minValue:0,maxValue:100,defaultValue:_,step:1,onChange:function(e){return I("MarginVertical",e)}})]})})})},mt=O.a.forwardRef(vt),wt=C.b.button(Ve||(Ve=Object(k.a)(["\n  padding: 16px 24px;\n  display: flex;\n  align-items: flex-start;\n  justify-content: flex-start;\n  background-color: ",";\n  transition: .1s ",";\n  cursor: pointer;\n  outline: none;\n  text-align: left;\n  border-bottom: 1px solid ",";\n  \n  &:nth-child(2) {\n    border-top: 1px solid ",";\n  }\n\n  & > div {\n    color: inherit;\n    flex-grow: 1;\n  }\n\n  &:hover > *, &:focus > * {\n    color: ",";\n  }\n"])),_.gray0,V,_.gray1,_.gray1,_.blue3),yt=C.b.div(Te||(Te=Object(k.a)(["\n  font-size: 14px;\n  font-weight: 600;\n  color: inherit;\n"]))),kt=C.b.div(Le||(Le=Object(k.a)(["\n  position: relative;\n  font-size: 14px;\n  margin-top: 16px;\n  padding: 8px;\n  box-sizing: border-box;\n\n  &::before {\n    content: '';\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    left: 0;\n    top: 0;\n    background-color: ",";\n    opacity: .3;\n    border-radius: 8px;\n    mix-blend-mode: multiply;\n  }\n"])),(function(e){return e.color})),Ct=n(23),_t={coverURL:"",title:"",description:"",published_date:"",modified_date:"",author:"",publisher:"",language:""},Bt={book:_t,currentLocation:{chapterName:"-",currentPage:0,totalPage:0,startCfi:"",endCfi:"",base:""},toc:[],highlights:[]},St=Object(Ct.c)({name:"book",initialState:Bt,reducers:{updateBook:function(e,t){e.book=t.payload},updateCurrentPage:function(e,t){e.currentLocation=t.payload},clearBook:function(e){e.book=_t},updateToc:function(e,t){e.toc=t.payload},clearToc:function(e){e.toc=[]},pushHighlight:function(e,t){e.highlights.filter((function(e){return e.key===t.payload.key})).length>0||e.highlights.push(t.payload)},updateHighlight:function(e,t){var n=t.payload.key,i=e.highlights.map((function(e){return e.key})).indexOf(n);e.highlights.splice(i,1,t.payload)},popHighlight:function(e,t){var n=e.highlights.map((function(e){return e.key})).indexOf(t.payload);e.highlights.splice(n,1)}}}),Et=St.actions,Ht=Et.updateBook,Rt=(Et.clearBook,Et.updateCurrentPage),zt=Et.updateToc,Vt=(Et.clearToc,Et.pushHighlight),Tt=Et.updateHighlight,Lt=Et.popHighlight,It=St.reducer,Mt=n(41),Nt=n(78),Pt=n(37),Wt=function(e,t){return(new Pt.EpubCFI).compare(e,t)},Ft=function(e){var t=e.slice(8,-1).split(","),n=Object(j.a)(t,3),i=n[0],r=n[1],o=n[2];return i&&r&&o?{startCfi:"epubcfi(".concat(i+r,")"),endCfi:"epubcfi(".concat(i+o,")")}:null},At=function(e){if(e){var t=e.slice(8,-1).split(","),n=Object(j.a)(t,3),i=n[0],r=n[1],o=n[2];return i&&r&&o?"epubcfi(".concat(i,")"):null}};var Xt,Dt,qt,Yt,Ut,Gt,Jt,Zt,Kt,Qt,$t,en,tn,nn,rn,on,cn,an,ln,sn,un,dn,bn=function(e){var t=e.highlight,n=e.onClick,i=e.emitEvent,r=e.viewerRef,o=Object(w.b)();return Object(A.jsx)(wt,{onClick:function(){if(r.current){var e=(new Date).toISOString();o(Tt(Object($.a)(Object($.a)({},t),{},{accessTime:e})));var c=Ft(t.cfiRange);if(c){var a=c.startCfi;r.current.setLocation(a),i();var l=r.current.querySelector("svg");if(l){var s=l.querySelector('g[data-epubcfi="'.concat(t.cfiRange,'"]'));s&&n(s.childNodes[0])}}}},children:Object(A.jsxs)("div",{children:[Object(A.jsx)(yt,{children:t.chpaterName}),Object(A.jsx)(kt,{color:t.color,children:t.content})]})})},fn=C.b.div(Xt||(Xt=Object(k.a)(["\n  flex-grow: 1;\n  display: flex;\n  flex-direction: column;\n  box-sizing: border-box;\n  padding: 24px 0;\n"]))),pn=C.b.div(Dt||(Dt=Object(k.a)(["\n  flex-grow: 1;\n  height: auto;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: ",";\n  font-size: 14px;\n"])),_.blue2),gn=function(e){var t=e.text;return Object(A.jsx)(pn,{children:t})},hn=function(e,t){var n=e.control,i=e.onToggle,r=e.onClickHighlight,o=e.emitEvent,c=e.viewerRef,a=Object(w.c)((function(e){return e.book.highlights})),l=Object(x.useState)([]),s=Object(j.a)(l,2),u=s[0],d=s[1];return Object(x.useEffect)((function(){var e=a.map((function(e){return Object(A.jsx)(bn,{highlight:e,onClick:r,emitEvent:o,viewerRef:c},e.key)}));d(e)}),[c,a,r,o,d]),Object(A.jsx)(A.Fragment,{children:n.display&&Object(A.jsx)(Ye,{title:"Highlight",show:n.open,onClose:i,ref:t,children:Object(A.jsx)(fn,{children:u.length>0?u:Object(A.jsx)(gn,{text:"Empty highlights!"})})})})},jn=O.a.forwardRef(hn),xn=function(e){var t=e.active,n=e.viewerRef,i=e.selection,r=(e.onAddHighlight,e.onRemoveHighlight,e.onUpdateHighlight,e.onContextmMenuRemove),o=Object(w.c)((function(e){return e.book.highlights})),c=Object(x.useRef)(null),a=Object(x.useState)(!1),l=Object(j.a)(a,2),s=l[0],u=l[1],d=Object(x.useCallback)((function(e){var t=e.path;c.current&&(Object(Mt.a)(t).includes(c.current)||r())}),[c,r]),b=Object(x.useCallback)((function(e){var t=e.key;t&&"ArrowLeft"===t&&r(),t&&"ArrowRight"===t&&r()}),[r]);return Object(x.useEffect)((function(){t||u(!1);var e=At(i.cfiRange);e&&(o.filter((function(t){return t.key===e+i.cfiRange})).length&&(i.update?u(!0):u(!1)))}),[t,o,i.cfiRange,i.update]),Object(x.useEffect)((function(){if(n.current){var e=document.querySelector("iframe"),i=e&&e.contentWindow&&e.contentWindow.document,o=n.current.querySelector("div");return t?(o&&o.addEventListener("scroll",r),i&&i.addEventListener("mousedown",d),i&&i.addEventListener("keyup",b),document.addEventListener("mousedown",d),document.addEventListener("keyup",b)):(o&&o.removeEventListener("scroll",r),i&&i.removeEventListener("mousedown",d),i&&i.removeEventListener("keyup",b),document.removeEventListener("mousedown",d),document.removeEventListener("keyup",b)),function(){i&&i.removeEventListener("mousedown",r),i&&i.removeEventListener("keyup",b),document.removeEventListener("keyup",b)}}}),[n,t,d,r,b]),Object(x.useEffect)((function(){var e=0;s&&(e+=1);var t=32*e+8,n=(i.y,window.innerHeight);i.y+t>n&&(i.y,i.height)}),[i.y,i.height,s]),Object(A.jsx)(A.Fragment,{})},On={fadeIn:Object(C.c)(qt||(qt=Object(k.a)(["\n\t0% { opacity: 0; }\n\t100% { opacity: 1;}\n"]))),fadeOut:Object(C.c)(Yt||(Yt=Object(k.a)(["\n\t0% { opacity: 1; }\n\t100% { opacity: 0; }\n"]))),fadeInTop:Object(C.c)(Ut||(Ut=Object(k.a)(["\n\t0% { opacity: 0; transform: translateY(-40px); }\n\t100% { opacity: 1; transform: translateY(0); }\n"]))),fadeOutTop:Object(C.c)(Gt||(Gt=Object(k.a)(["\n\t0% { opacity: 1; transform: translateY(0); }\n\t100% { opacity: 0; transform: translateY(-40px); }\n"]))),fadeInBottom:Object(C.c)(Jt||(Jt=Object(k.a)(["\n\t0% { opacity: 0; transform: translateY(40px); }\n\t100% { opacity: 1; transform: translateY(0); }\n"]))),fadeOutBottom:Object(C.c)(Zt||(Zt=Object(k.a)(["\n\t0% { opacity: 1; transform: translateY(0); }\n\t100% { opacity: 0; transform: translateY(40px); }\n"]))),fadeInLeft:Object(C.c)(Kt||(Kt=Object(k.a)(["\n\t0% { opacity: 0; transform: translateX(-40px); }\n\t100% { opacity: 1; transform: translateX(0); }\n"]))),fadeOutLeft:Object(C.c)(Qt||(Qt=Object(k.a)(["\n\t0% { opacity: 1; transform: translateX(0); }\n\t100% { opacity: 0; transform: translateX(-40px); }\n"]))),fadeInRight:Object(C.c)($t||($t=Object(k.a)(["\n\t0% { opacity: 0; transform: translateX(40px); }\n\t100% { opacity: 1; transform: translateX(0); }\n"]))),fadeOutRight:Object(C.c)(en||(en=Object(k.a)(["\n\t0% { opacity: 1; transform: translateX(0); }\n\t100% { opacity: 0; transform: translateX(40px); }\n"]))),spin:Object(C.c)(tn||(tn=Object(k.a)(["\n\tfrom { transform: rotate(0deg); }\n\tto { transform: rotate(360deg); }\n"])))},vn=C.b.div(nn||(nn=Object(k.a)(["\n\tposition: relative;\n\twidth: 320px;\n\theight: auto;\n\tmax-height: 800px;\n\tbackground-color: ",";\n\tbox-shadow: ",";\n\tborder-radius: 4px;\n\tanimation: "," .3s cubic-bezier(0.25,0.1,0.25,1),\n\t\t\t\t\t\t "," .5s cubic-bezier(0.25,0.1,0.25,1) 3.6s;\n\tcursor: pointer;\n\ttransition: .2s ",";\n\t",";\n\n\t&:active {\n\t\ttransform: scale(.97, .97);\n\t}\n\n\t"," {\n\t\tborder-radius: 0px;\n\t\twidth: 100%;\n\t\tmin-height: 1.8rem;\n\t}\n"])),(function(e){var t=e.type;return"SUCCESS"===t?_.green4:"WARNING"===t?_.orange4:"ERROR"===t?_.red3:"INFO"===t?_.blue4:_.gray4}),T,On.fadeInBottom,On.fadeOutBottom,V,(function(){return"\n\t-webkit-touch-callout: none;\n\t-webkit-user-select: none;\n\t-khtml-user-select: none;\n\t-moz-user-select: none;\n\t-ms-user-select: none;\n\tuser-select: none;\n"}),F.small),mn=C.b.div(rn||(rn=Object(k.a)(["\n\tposition: relative;\n\tdisplay: flex;\n\twidth: 100%;\n\theight: auto;\n\tmin-height: 2rem;\n\tbox-sizing: border-box;\n\tpadding: 12px 20px;\n\n\t"," {\n\t\tmin-height: 1.6rem;\n\t\tline-height: 1.6rem;\n\t}\n"])),F.small),wn=C.b.div(on||(on=Object(k.a)(["\n\tposition: relative;\n\tflex-grow: 1;\n\tcolor: white;\n\tfont-size: 14px;\n\twhite-space: pre-wrap;\n\tword-break: keep-all;\n\tvertical-align: top;\n"]))),yn=function(e){var t=e.onClick,n=e.text,i=e.type;return Object(A.jsx)(vn,{onClick:t,type:i,children:Object(A.jsx)(mn,{children:Object(A.jsx)(wn,{children:n})})})},kn=[],Cn=Object(Ct.b)("snackbar/newSnackbar",function(){var e=Object(h.a)(g.a.mark((function e(t,n){var i,r,o,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.text,r=t.type,o=n.dispatch,0!==kn.length&&(c=kn.shift(),clearTimeout(c)),o(_n.actions.deleteSnackbar()),e.next=6,setTimeout((function(){o(_n.actions.appendSnackbar({text:i,type:r||"INFO"}));var e=window.setTimeout((function(){o(_n.actions.deleteSnackbar())}),4e3);kn.push(e)}),50);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),_n=Object(Ct.c)({name:"snackbar",initialState:{text:"",type:"INFO"},reducers:{appendSnackbar:function(e,t){e.text=t.payload.text,e.type=t.payload.type},deleteSnackbar:function(e){e.text="",e.type="INFO"}}}),Bn=_n.actions,Sn=(Bn.appendSnackbar,Bn.deleteSnackbar),En=_n.reducer,Hn=C.b.div(cn||(cn=Object(k.a)(["\n\tposition: fixed;\n\ttop: 40px;\n\tright: 30px;\n\twidth: 320px;\n\theight: auto;\n\tz-index: ",";\n\n\t"," {\n\t\twidth: 100%;\n\t\ttop: initial;\n\t\tbottom: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tmargin: auto;\n\t}\n"])),S.snackbar,F.small),Rn=function(){var e=Object(w.b)(),t=Object(w.c)((function(e){return e.snackbar}));return Object(A.jsx)(Hn,{children:""!==t.text&&Object(A.jsx)(yn,{onClick:function(t){t&&(t.preventDefault(),t.stopPropagation()),e(Sn())},text:t.text,type:t.type})})},zn=C.b.div(an||(an=Object(k.a)(["\n  position: relative;\n  width: 100vw;\n  height: 100vh;\n  overflow-x: hidden;\n  display: flex;\n  flex-direction: column;\n  ",";\n"])),L(0)),Vn=Object(C.c)(ln||(ln=Object(k.a)(["\n\tfrom { transform: rotate(0deg); }\n\tto { transform: rotate(360deg); }\n"]))),Tn=C.b.div(sn||(sn=Object(k.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),Ln=C.b.div(un||(un=Object(k.a)(["\n\tposition: relative;\n\twidth: 100%;\n\theight: 30px;\n\tmargin: 30px 0;\n\ttext-align: center;\n"]))),In=C.b.div(dn||(dn=Object(k.a)(["\n\tdisplay: inline-block;\n\twidth: 30px;\n\theight: 30px;\n\tborder: 3px solid #ebf1ff;\n\tborder-radius: 50%;\n\tborder-top-color: #3972ff;\n\tanimation: "," 1s ease-in-out infinite;\n"])),Vn),Mn=function(){return Object(A.jsx)(Tn,{children:Object(A.jsx)(Ln,{children:Object(A.jsx)(In,{})})})},Nn=n(17),Pn=Object(Nn.c)({book:It,snackbar:En}),Wn=Object(Ct.a)({reducer:Pn});var Fn=function(e,t){var n=Object(x.useState)(!0),i=Object(j.a)(n,2),r=i[0],o=i[1],c=Object(x.useState)({display:!1,open:!1}),a=Object(j.a)(c,2),l=a[0],s=a[1],u=Object(x.useCallback)((function(){var e=null;window.clearTimeout(e),l.display?(s({display:!0,open:!1}),e=window.setTimeout((function(){return s({display:!1,open:!1})}),t-50)):(s({display:!0,open:!1}),e=window.setTimeout((function(){return s({display:!0,open:!0})}),0))}),[l.display,t]),d=Object(x.useCallback)((function(t){e&&e.current&&t.path&&!t.path.includes(e.current)&&u()}),[e,u]),b=Object(x.useCallback)((function(){window.setTimeout((function(){return o(!0)}),300)}),[o]);return Object(x.useEffect)((function(){if(r||l.display){var e=document.querySelector("iframe");return l.display?(document.addEventListener("click",d),e&&e.contentWindow&&e.contentWindow.document.addEventListener("click",d)):(document.removeEventListener("click",d),e&&e.contentWindow&&e.contentWindow.document.removeEventListener("click",d)),o(!1),function(){document.removeEventListener("click",d),e&&e.contentWindow&&e.contentWindow.document.removeEventListener("click",d)}}}),[l.display,d,r]),[l,u,b]},An={MIN_VIEWER_WIDTH:300,MIN_VIEWER_HEIGHT:300,VIEWER_HEADER_HEIGHT:64,VIEWER_FOOTER_HEIGHT:60,VIEWER_SIDEMENU_WIDTH:0},Xn=function(e,t,n,i){var r=Object(w.b)(),o=Object(w.c)((function(e){return e.book.currentLocation})),c=Object(w.c)((function(e){return e.book.highlights})),a=Object(x.useState)({update:!1,x:0,y:0,height:0,cfiRange:"",content:""}),l=Object(j.a)(a,2),s=l[0],u=l[1],d=Object(x.useCallback)((function(t){if(!e.current)return!1;var o=e.current.querySelector("iframe");if(!o)return!1;var a=o.contentWindow;if(!a)return!1;if(c.filter((function(e){return function(e,t){var n=Ft(e),i=Ft(t);if(!n||!i)return null;var r=n.startCfi,o=n.endCfi,c=i.startCfi,a=i.endCfi;return Wt(c,r)<=0&&Wt(r,a)<=0||Wt(c,o)<=0&&Wt(o,a)<=0||Wt(r,c)<=0&&Wt(a,o)<=0}(e.cfiRange,t)})).length>0)return r(Cn({text:"There are already registered highlights in your selection.",type:"WARNING"})),a.getSelection().removeAllRanges(),!1;var l=function(e,t,n,i,r,o,c){var a=window,l=a.innerWidth,s=a.innerHeight,u=e.offsetWidth,d=e.querySelector("div").scrollTop,b=e.querySelector("iframe"),f=b&&b.contentWindow&&b.contentWindow.getSelection();if(!f||0===f.rangeCount)return null;var p=f.getRangeAt(0).getBoundingClientRect(),g=p.x,h=p.y,j=p.height,x=p.width;return{x:~~(g%u+~~((l-i)/100*t.marginHorizontal/2)+(x/2-c/2)),y:~~(h+j+o+("scrolled-doc"===n?0:~~((s-o-r)/100*t.marginVertical/2))-d),height:j,width:x}}(e.current,n,i,An.MIN_VIEWER_WIDTH,An.MIN_VIEWER_HEIGHT,An.VIEWER_HEADER_HEIGHT,160);if(!l)return!1;var s=l.x,d=l.y,b=l.height,f=a.getSelection().toString().trim();return 0!==f.length&&(u({update:!1,x:s,y:d,height:b,cfiRange:t,content:f}),!0)}),[r,e,c,i,n,u]),b=Object(x.useCallback)((function(e){var t=e.parentElement;if(t){var n=t.dataset.epubcfi;if(n){var i=t.getBoundingClientRect(),r=i.x,o=i.y,c=i.width,a=i.height;u({update:!0,x:r+c/2-80,y:o+a,height:a,cfiRange:n,content:""})}}}),[u]),f=Object(x.useCallback)((function(e){var t=At(s.cfiRange);if(t){var n={key:t+s.cfiRange,accessTime:(new Date).toISOString(),createTime:(new Date).toISOString(),color:e,paragraphCfi:t,cfiRange:s.cfiRange,chpaterName:o.chapterName,pageNum:o.currentPage,content:s.content};r(Vt(n)),u(Object($.a)(Object($.a)({},s),{},{update:!0}))}}),[r,s,o]),p=Object(x.useCallback)((function(e,t){e&&r(Tt(Object($.a)(Object($.a)({},e),{},{color:t})))}),[r]),g=Object(x.useCallback)((function(t,n){e.current&&t&&(r(Lt(t)),r(Cn({text:"The highlight removed successful!",type:"INFO"})),e.current.offHighlight(n))}),[r,e]);return Object(x.useEffect)((function(){if(e.current){var n=e.current.querySelector("iframe");if(n){var i=n.contentWindow;i&&c.forEach((function(n){var r=Ft(n.cfiRange);if(r){var c=r.startCfi;if(Wt(o.startCfi,c)<1&&Wt(o.endCfi,c)>-1){if(!function(e){var t=e.slice(8,-1).replace(/\[.*?\]/gi,"").split("!");if(t.length<1||""===t[1])return null;var n=t[1].split("/").slice(2).map((function(e){return Number(e)})),i=document.querySelector("iframe");if(!i)return null;var r=i.contentWindow&&i.contentWindow.document.body;if(!r)return null;var o,c=r,a=Object(Nt.a)(n);try{for(a.s();!(o=a.n()).done;){var l=o.value,s=c&&c.childNodes;if(!(c=Object(Mt.a)(s).filter((function(e){return!e.dataset||!e.dataset.bookmark||!e.dataset.highlight}))[l-1])){c=null;break}}}catch(u){a.e(u)}finally{a.f()}return c}(n.paragraphCfi))return;e.current.onHighlight(n.cfiRange,(function(e){b(e.target),t(!0)}),n.color),i.getSelection().removeAllRanges()}}}))}}}),[r,e,o,c,g,b,t]),{selection:s,onSelection:d,onClickHighlight:b,onAddHighlight:f,onRemoveHighlight:g,onUpdateHighlight:p}},Dn=(n(149),n(79)),qn=n.n(Dn),Yn=function(e){e.url;var t=e.loadingView,n=Object(w.b)(),i=Object(w.c)((function(e){return e.book.currentLocation})),r=Object(x.useState)(""),o=Object(j.a)(r,2),c=o[0],a=o[1],l=Object(x.useState)(""),s=Object(j.a)(l,2),u=s[0],d=s[1],b=Object(x.useRef)(null),f=Object(x.useRef)(null),p=Object(x.useRef)(null),O=Object(x.useRef)(null),v=Object(x.useState)(!1),k=Object(j.a)(v,2),C=k[0],_=k[1],B=Object(x.useState)({fontSize:18,lineHeight:1.4,marginHorizontal:15,marginVertical:5}),S=Object(j.a)(B,2),E=S[0],H=S[1],R=Object(x.useState)({flow:"paginated",resizeOnOrientationChange:!0,spread:"auto"}),z=Object(j.a)(R,2),V=z[0],T=z[1],L=Fn(f,300),I=Object(j.a)(L,2),M=I[0],N=I[1],P=Fn(p,300),W=Object(j.a)(P,3),F=W[0],X=W[1],D=W[2],q=Fn(O,300),Y=Object(j.a)(q,2),U=Y[0],G=Y[1],Z=Xn(b,_,E,V.flow),K=Z.selection,Q=Z.onSelection,$=Z.onClickHighlight,ee=Z.onAddHighlight,te=Z.onRemoveHighlight,ne=Z.onUpdateHighlight;function ie(e){for(var t=window.location.search.substring(1).split("&"),n=0;n<t.length;n++){var i=t[n].split("=");if(i[0]===e)return i[1]}return!1}return Object(x.useEffect)((function(){(function(){var e=Object(h.a)(g.a.mark((function e(){var t,n,i,r,o,c,l,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.a.v4();case 2:return t=e.sent,n=ie("ref"),e.next=6,m.a.post("https://localhost/decrypt",{payload:n});case 6:return i=e.sent,r=i.data[1],o=i.data[0],e.prev=9,c={headers:{"x-api-key":"N8XUonMLYfahPHJ6q5EdP37STXgnCs4Z4thDa2dN"}},e.next=13,m.a.post("https://1m2dc0uz5l.execute-api.ap-south-1.amazonaws.com/staging/api",{method:"readbookcheck",book_id:r,user_id:o,ip_address:t},c);case 13:l=e.sent,s=l.data,console.log(s),0===s.result?window.location.replace("https://pustaka.co.in/home/book-warning-message"):(a(s.epub_url),d(s.book_title)),e.next=21;break;case 19:e.prev=19,e.t0=e.catch(9);case 21:case"end":return e.stop()}}),e,null,[[9,19]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(A.jsxs)(A.Fragment,{children:[Object(A.jsxs)(zn,{children:[Object(A.jsx)(J,{onNavToggle:N,onOptionToggle:X,onLearningToggle:G,bookTitle:u}),Object(A.jsx)(y.ReactEpubViewer,{url:c,viewerLayout:An,viewerStyle:E,viewerOption:V,onBookInfoChange:function(e){return n(Ht(e))},onPageChange:function(e){console.log(e),n(Rt(e))},onTocChange:function(e){return n(zt(e))},onSelection:function(e){var t=Q(e);_(t)},loadingView:t||Object(A.jsx)(Mn,{}),ref:b}),Object(A.jsx)(Pe,{title:i.chapterName,nowPage:i.currentPage,totalPage:i.totalPage,onPageMove:function(e){var t=b.current;t&&t.prevPage&&t.nextPage&&("PREV"===e&&t.prevPage(),"NEXT"===e&&t.nextPage())}})]}),Object(A.jsx)(nt,{control:M,onToggle:N,onLocation:function(e){b.current&&b.current.setLocation(e)},ref:f}),Object(A.jsx)(mt,{control:F,bookStyle:E,bookOption:V,bookFlow:V.flow,onToggle:X,emitEvent:D,onBookStyleChange:function(e){return H(e)},onBookOptionChange:function(e){return T(e)},ref:p}),Object(A.jsx)(jn,{control:U,onToggle:G,onClickHighlight:$,emitEvent:D,viewerRef:b,ref:O}),Object(A.jsx)(xn,{active:C,viewerRef:b,selection:K,onAddHighlight:ee,onRemoveHighlight:te,onUpdateHighlight:ne,onContextmMenuRemove:function(){return _(!1)}}),Object(A.jsx)(Rn,{})]})},Un=function(e){var t=e.url,n=e.loadingView;return Object(A.jsx)(w.a,{store:Wn,children:Object(A.jsx)(Yn,{url:t,loadingView:n})})};f.a.render(Object(A.jsx)(Un,{url:"https://www.pustaka.co.in/tam/epub/detective/m7hzyp0x/kaliyuga-raavanan.epub"}),document.getElementById("root"))}},[[167,1,2]]]);
//# sourceMappingURL=main.da6888f2.chunk.js.map