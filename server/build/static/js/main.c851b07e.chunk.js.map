{"version":3,"sources":["lib/styles/palette.ts","lib/styles/zIndex.ts","components/header/Wrapper.tsx","components/header/Layout.tsx","lib/styles/styles.ts","lib/styles/media.ts","components/header/Logo.tsx","components/header/ControlBtn.tsx","containers/Header.tsx","components/footer/Wrapper.tsx","components/footer/Item.tsx","lib/svg/Prev.js","lib/svg/Next.js","lib/svg/BookClose.js","lib/svg/BookOpen.js","lib/svg/Close.js","lib/svg/ScrollHorizontal.js","lib/svg/ScrollVertical.js","lib/svg/Search.js","components/footer/MoveBtn.tsx","containers/Footer.tsx","components/sideMenu/CloseBtn.tsx","components/sideMenu/Wrapper.tsx","components/nav/BookInfo.tsx","components/nav/NavItem.tsx","containers/menu/Nav.tsx","components/option/Layout.tsx","components/option/OptionWrapper.tsx","components/option/OptionTitle.tsx","components/option/OptionValue.tsx","components/option/SliderValue.tsx","components/option/Slider.tsx","components/option/ControlIconBtnWrapper.tsx","components/option/ControlIconBtn.tsx","containers/menu/Option.tsx","components/note/highlight/Wrapper.tsx","components/note/highlight/Title.tsx","components/note/highlight/Post.tsx","slices/book.ts","lib/utils/commonUtil.ts","containers/menu/commons/Highlight.tsx","components/note/Layout.tsx","components/sideMenu/MenuEmpty.tsx","containers/menu/Note.tsx","containers/commons/ContextMenu.tsx","lib/styles/animations.ts","components/commons/Snackbar.tsx","slices/snackbar.ts","containers/commons/Snackbar.tsx","components/commons/ViewerWrapper.tsx","LoadingView.tsx","slices/index.ts","lib/hooks/useMenu.ts","lib/styles/viewerLayout.ts","lib/hooks/useHighlight.ts","containers/Reader.tsx","index.tsx"],"names":["palette","white","black","gray0","gray1","gray2","gray3","gray4","gray5","gray6","gray7","gray8","red0","red1","red2","red3","red4","red5","red6","red7","red8","orange0","orange1","orange2","orange3","orange4","orange5","orange6","orange7","orange8","yellow0","yellow1","yellow2","yellow3","yellow4","yellow5","yellow6","yellow7","yellow8","green0","green1","green2","green3","green4","green5","green6","green7","green8","blue0","blue1","blue2","blue3","blue4","blue5","blue6","blue7","blue8","purple0","purple1","purple2","purple3","purple4","purple5","purple6","purple7","purple8","zIndexSet","layer","zIndex","header","menu","modal","snackbar","tooltip","Wrapper","styled","div","Layout","AutoLayout","transition","boxShadow","scrollbar","width","mediaQuery","maxWidth","mediaValue","media","xlarge","large","medium","small","xsmall","custom","a","styles","Img","img","H2","h2","Logo","bookTitle","href","target","src","alt","Btn","button","ControlBtn","message","onClick","Header","onNavToggle","onOptionToggle","onLearningToggle","Container","Item","text","SvgPrev","props","xmlns","viewBox","id","data-name","fill","d","opacity","className","SvgNext","SvgBookClose","SvgBookOpen","SvgClose","SvgScrollHorizontal","cx","cy","r","SvgScrollVertical","SvgSearch","Content","MoveBtn","type","Icon","PrevIcon","NextIcon","msg","title","Footer","nowPage","totalPage","onPageMove","CloseIcon","CloseBtn","ref","show","onClose","children","React","forwardRef","BookImg","BookContent","Title","Info","BookInfo","publisher","author","NavItem","Nav","control","onToggle","onLocation","book","useSelector","state","bookToc","toc","Tocs","map","t","idx","label","loc","display","open","coverURL","OptionWrapper","OptionTitle","OptionValue","span","active","SliderWrapper","SliderBackground","SliderBar","percentage","Slider","input","SliderValue","minValue","maxValue","defaultValue","step","onChange","Math","round","min","max","disabled","e","BtnWrapper","ControlIconBtnWrapper","isSelected","css","ControlIconBtn","HeaderIcon","ScrollVerticalIcon","ScrollHorizontalIcon","BookOpenIcon","BookCloseIcon","Option","bookStyle","bookOption","bookFlow","emitEvent","onBookStyleChange","onBookOptionChange","useState","fontSize","setFontSize","lineHeight","setLineHeight","marginHorizontal","setMarginHorizontal","marginVertical","setMarginVertical","isScrollHorizontal","setIsScrollHorizontal","spread","viewType","setViewType","onChangeSlider","value","onClickDirection","flow","onClickViewType","isSpread","useEffect","timer","window","setTimeout","clearTimeout","Post","color","initialBook","description","published_date","modified_date","language","initialState","currentLocation","chapterName","currentPage","startCfi","endCfi","base","highlights","bookSlice","createSlice","name","reducers","updateBook","action","payload","updateCurrentPage","clearBook","updateToc","clearToc","pushHighlight","filter","h","key","length","push","updateHighlight","new_idx","old_idx","indexOf","splice","popHighlight","actions","compareCfi","cfi_1","cfi_2","EpubCFI","compare","cfiRangeSpliter","cfiRange","slice","split","origin","start","end","getParagraphCfi","Highlight","highlight","viewerRef","dispatch","useDispatch","current","now","Date","toISOString","accessTime","splitCfi","setLocation","svgContainer","querySelector","targetSvg","childNodes","chpaterName","content","MenuEmpty","Note","onClickHighlight","highlightList","setHighlightList","Items","ContextMenu","selection","onContextmMenuRemove","onAddHighlight","onRemoveHighlight","onUpdateHighlight","menuRef","useRef","isEraseBtn","setIsEraseBtn","onRemove","useCallback","path","includes","onKeyPress","paragraphCfi","update","iframe","document","node","contentWindow","scrolledTarget","addEventListener","removeEventListener","itemCnt","defaultHeight","innerHeight","y","height","animations","fadeIn","keyframes","fadeOut","fadeInTop","fadeOutTop","fadeInBottom","fadeOutBottom","fadeInLeft","fadeOutLeft","fadeInRight","fadeOutRight","spin","Message","Snackbar","RefEvent","newSnackbar","createAsyncThunk","event","shift","SnackbarSlice","deleteSnackbar","appendSnackbar","SnackbarWrapper","preventDefault","stopPropagation","ViewerWrapper","LoadingWrapper","LoadingView","reducer","combineReducers","store","configureStore","useMenu","delay","eventSignal","setEventSignal","setControl","epubIframe","viewerLayout","MIN_VIEWER_WIDTH","MIN_VIEWER_HEIGHT","VIEWER_HEADER_HEIGHT","VIEWER_FOOTER_HEIGHT","VIEWER_SIDEMENU_WIDTH","useHighlight","setIsContextMenu","x","setSelection","onSelection","iframeWin","baseCfiRange","targetCfiRange","splitCfi1","splitCfi2","s1","e1","s2","e2","clashCfiRange","getSelection","removeAllRanges","position","viewer","CONTEXTMENU_WIDTH","windowWidth","innerWidth","windowHeight","iframeWidth","offsetWidth","scrollTop","selection_","rangeCount","getRangeAt","getBoundingClientRect","selectionX","selectionY","selectionHeight","selectionWidth","getSelectionPosition","toString","trim","highlightNode","targetNode","parentElement","dataset","epubcfi","contextmenuWidth","createTime","pageNum","offHighlight","forEach","cfi","replace","cfiPath","Number","iframeBody","body","component","n","bookmark","getNodefromCfi","onHighlight","Reader","url","loadingView","epubUrl","setEpubUrl","setBookTitle","navRef","optionRef","learningRef","isContextMenu","setBookStyle","resizeOnOrientationChange","setBookOption","navControl","optionControl","learningControl","getQueryVariable","variable","query","location","search","substring","console","log","vars","i","pair","queryStr","axios","post","decryptedStr","bookId","data","config","headers","method","book_id","user_id","epub_url","getBookDetails","viewerStyle","viewerOption","onBookInfoChange","onPageChange","page","onTocChange","result","prevPage","nextPage","bookStyle_","bookOption_","ReaderWrapper","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.c851b07e.chunk.js","sourcesContent":["/*\n :::: Color Varient ::::\n*/\nconst palette = {\n  white: '#ffffff',\n  black: '#000000',\n  /* gray */\n  gray0: '#fafafa',\n  gray1: '#e7e7e7',\n  gray2: '#c3c3c3',\n  gray3: '#9e9e9e',\n  gray4: '#868686',\n  gray5: '#656565',\n  gray6: '#505050',\n  gray7: '#3c3c3c',\n  gray8: '#282828',\n  /* red */\n  red0: '#ffe8e8',\n  red1: '#ffd0d1',\n  red2: '#ff8a8b',\n  red3: '#ff4445',\n  red4: '#ff1517',\n  red5: '#bf1011',\n  red6: '#990d0e',\n  red7: '#73090a',\n  red8: '#4d0607',\n  /* orange */\n  orange0: '#fff0ec',\n  orange1: '#ffe2d9',\n  orange2: '#ffb6a0',\n  orange3: '#ff8966',\n  orange4: '#ff6c40',\n  orange5: '#bf5130',\n  orange6: '#994126',\n  orange7: '#73311d',\n  orange8: '#4d2013',\n  /* yellow */\n  yellow0: '#fffce6',\n  yellow1: '#fffacc',\n  yellow2: '#fff280',\n  yellow3: '#feea33',\n  yellow4: '#fee500',\n  yellow5: '#bfac00',\n  yellow6: '#988900',\n  yellow7: '#726700',\n  yellow8: '#4c4500',\n  /* green */\n  green0: '#e6f7e6',\n  green1: '#cdefcc',\n  green2: '#83d880',\n  green3: '#39c133',\n  green4: '#07b100',\n  green5: '#058500',\n  green6: '#046a00',\n  green7: '#035000',\n  green8: '#023500',\n  /* blue */\n  blue0: '#ebf1ff',\n  blue1: '#d7e3ff ',\n  blue2: '#9cb9ff ',\n  blue3: '#618eff ',\n  blue4: '#3972ff ',\n  blue5: '#2b56bf ',\n  blue6: '#224499 ',\n  blue7: '#1a3373 ',\n  blue8: '#11224d ',\n  /* purple */\n  purple0: '#f2ebff',\n  purple1: '#d7e3ff',\n  purple2: '#be9cff',\n  purple3: '#9761ff',\n  purple4: '#7d39ff',\n  purple5: '#5e2bbf',\n  purple6: '#4b2299',\n  purple7: '#381a73',\n  purple8: '#26114d',\n};\n\nexport default palette","export const zIndexSet = (layer: number): string => `\n\t${layer}\n`;\n\nconst zIndex = {\n\theader: zIndexSet(5),\n\tmenu: zIndexSet(10),\n\tmodal: zIndexSet(100),\n\tsnackbar: zIndexSet(400),\n\ttooltip: zIndexSet(500)\n};\n\nexport default zIndex;","import styled from 'styled-components'\n// lib\nimport palette from 'lib/styles/palette'\nimport zIndex from 'lib/styles/zIndex'\n\nconst Wrapper = styled.div`\n  position: sticky;\n  width: 100%;\n  height: auto;\n  left: 0;\n  top: 0;\n  background-color: ${palette.white};\n  z-index: ${zIndex.header};\n`;\n\nexport default Wrapper","import styled from 'styled-components'\n// lib\nimport palette from 'lib/styles/palette'\nimport zIndex from 'lib/styles/zIndex'\n\nconst Layout = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 64px;\n  z-index: ${zIndex.header};\n`;\n\nexport const AutoLayout = styled.div`\n  width: 100%;\n  flex-grow: 1;\n  display: flex;\n  justify-content: space-between;\n  border-bottom: 2px solid ${palette.gray1};\n\n  & > div {\n    display: flex;\n    align-items: center;\n    justify-content: flex-start;\n  }\n  & > div:last-child {\n    margin-right: 8px;\n  }\n`;\n\nexport default Layout","export const noselect = (): string => `\n\t-webkit-touch-callout: none;\n\t-webkit-user-select: none;\n\t-khtml-user-select: none;\n\t-moz-user-select: none;\n\t-ms-user-select: none;\n\tuser-select: none;\n`;\n\nexport const transition = (): string =>`\n\tcubic-bezier(0.25, 0.1, 0.25, 1);\n`;\n\nexport const boxShadow = {\n\tlight: \"0px 4px 16px rgba(0, 0, 0, 0.04)\",\n\tregular: \"0px 8px 12px rgba(0, 0, 0, 0.2)\",\n\tbold: \"0 8px 10px 1px rgba(0,0,0,0.14), 0 3px 8px 2px rgba(0,0,0,0.12), 0 5px 5px -3px rgba(0,0,0,0.2)\"\n};\n\nexport const scrollbar = (width=8) => `\n\t&::-webkit-scrollbar {\n\t\twidth: ${width}px;\n\t\tbackground: transparent;\n\t}\n\t&::-webkit-scrollbar-thumb {\n\t\tbackground: #ddd;\n\t\tborder-radius: 10px;\n\t}\n\t&::-webkit-scrollbar-thumb:hover {\n\t\tbackground: #ccc;\n\t}\n\t&::-webkit-scrollbar-track {\n\t\tbackground: transparent;\n\t}\n`","export const mediaQuery = (maxWidth: number): string => `\n\t@media (max-width: ${maxWidth}px)\n`;\n\nexport const mediaValue = {\n\txlarge: 1600,\n\tlarge: 1440,\n\tmedium: 1200,\n\tsmall: 702,\n\txsmall: 350\t\n};\n\ntype Media = {\n\txlarge : string,\n\tlarge : string,\n\tmedium : string,\n\tsmall : string,\n\txsmall : string,\n\tcustom : (maxWidth: number) => string\n}\n\nconst media: Media = {\n\txlarge : mediaQuery(mediaValue.xlarge),\n\tlarge : mediaQuery(mediaValue.large),\n\tmedium : mediaQuery(mediaValue.medium),\n\tsmall : mediaQuery(mediaValue.small),\n\txsmall : mediaQuery(mediaValue.xsmall),\n\tcustom : mediaQuery,\n};\n\nexport default media;","import styled from \"styled-components\";\n// lib\nimport * as styles from \"lib/styles/styles\";\nimport palette from \"lib/styles/palette\";\nimport { mediaQuery } from \"lib/styles/media\";\n\nconst Logo: React.FC<any> = ({ bookTitle }) => {\n  return (\n    <Wrapper href=\"https://pustaka.co.in\" target=\"__blank__\">\n      <Img\n        src=\"https://www.pustaka.co.in/mgmt/assets/img/login_logo.png\"\n        alt=\"Logo\"\n      />\n      <H2>{bookTitle || \"Book Title\"}</H2>\n    </Wrapper>\n  );\n};\n\nconst Wrapper = styled.a`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  outline: none;\n  margin-left: 16px;\n  background-color: rgba(0, 0, 0, 0);\n  transition: 0.2s ${styles.transition};\n  border-radius: 8px;\n  padding: 4px 8px;\n  cursor: pointer;\n\n  ${mediaQuery(700)} {\n    display: none;\n  }\n\n  &:focus,\n  &:hover {\n    background-color: ${palette.blue0};\n  }\n`;\n\nconst Img = styled.img`\n  height: 44px;\n`;\n\nconst H2 = styled.h2`\n  margin-left: 20px;\n  margin-top: 20px;\n  font-size: 20px;\n  align-self: center;\n  font-family: \"Poppins\", sans-serif;\n`;\n\nexport default Logo;\n","import styled from 'styled-components'\n// lib\nimport * as styles from 'lib/styles/styles'\nimport palette from 'lib/styles/palette'\n\nconst ControlBtn = ({ message, onClick }: Props) => {\n  return <Btn onClick={() => onClick()}>{message}</Btn>;\n}\n\nconst Btn = styled.button`\n  height: 100%;\n  padding: 0 16px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: .1s ${styles.transition};\n  outline: none;\n\n  &:focus, &:hover {\n    color: ${palette.blue3};\n  }\n\n  &:first-child {\n    margin-left: 8px;\n  }\n`;\n\ninterface Props {\n  message: string;\n  onClick: (value?: boolean) => void;\n}\n\nexport default ControlBtn","// components\nimport Wrapper from \"components/header/Wrapper\";\nimport Layout, { AutoLayout } from \"components/header/Layout\";\nimport Logo from \"components/header/Logo\";\nimport ControlBtn from \"components/header/ControlBtn\";\n\nconst Header = ({\n  onNavToggle,\n  onOptionToggle,\n  onLearningToggle,\n  bookTitle,\n}: Props) => {\n  return (\n    <Wrapper>\n      <Layout>\n        <AutoLayout>\n          <Logo bookTitle={bookTitle} />\n          <div>\n            <ControlBtn message=\"Table of Contents\" onClick={onNavToggle} />\n            <ControlBtn message=\"Setting\" onClick={onOptionToggle} />\n          </div>\n        </AutoLayout>\n      </Layout>\n    </Wrapper>\n  );\n};\n\ninterface Props {\n  onNavToggle: (value?: boolean) => void;\n  onOptionToggle: (value?: boolean) => void;\n  onLearningToggle: (value?: boolean) => void;\n  bookTitle: string;\n}\n\nexport default Header;\n","import styled from \"styled-components\";\n// lib\nimport palette from \"lib/styles/palette\";\n\nconst Wrapper = styled.div`\n  position: fixed;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  height: 60px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: ${palette.white};\n`;\n\nexport default Wrapper;\n","import styled from \"styled-components\";\n// lib\nimport palette from \"lib/styles/palette\";\n\nconst Item = ({ text }: Props) => {\n  return (\n    <Container>\n      <span>{text}</span>\n    </Container>\n  );\n};\n\nconst Container = styled.div`\n  height: 100%;\n  flex-basis: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n\n  & > span {\n    color: ${palette.gray4};\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n`;\n\ninterface Props {\n  text: string;\n}\n\nexport default Item;\n","import * as React from \"react\";\n\nfunction SvgPrev(props) {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 44 44\" {...props}>\n      <defs>\n        <style>\n          {\n            \".prev_svg__cls-3{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px}\"\n          }\n        </style>\n      </defs>\n      <g id=\"prev_svg__\\uB808\\uC774\\uC5B4_2\" data-name=\"\\uB808\\uC774\\uC5B4 2\">\n        <g\n          id=\"prev_svg__\\uB808\\uC774\\uC5B4_1-2\"\n          data-name=\"\\uB808\\uC774\\uC5B4 1\"\n        >\n          <path fill=\"none\" d=\"M0 0h44v44H0z\" opacity={0.3} />\n          <path className=\"prev_svg__cls-3\" d=\"M12 22L32 2M12 22l20 20\" />\n        </g>\n      </g>\n    </svg>\n  );\n}\n\nexport default SvgPrev;\n","import * as React from \"react\";\n\nfunction SvgNext(props) {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 44 44\" {...props}>\n      <defs>\n        <style>\n          {\n            \".next_svg__cls-3{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px}\"\n          }\n        </style>\n      </defs>\n      <g id=\"next_svg__\\uB808\\uC774\\uC5B4_2\" data-name=\"\\uB808\\uC774\\uC5B4 2\">\n        <g\n          id=\"next_svg__\\uB808\\uC774\\uC5B4_1-2\"\n          data-name=\"\\uB808\\uC774\\uC5B4 1\"\n        >\n          <path fill=\"none\" d=\"M0 0h44v44H0z\" opacity={0.3} />\n          <path className=\"next_svg__cls-3\" d=\"M32 22L12 2M32 22L12 42\" />\n        </g>\n      </g>\n    </svg>\n  );\n}\n\nexport default SvgNext;\n","import * as React from \"react\";\n\nfunction SvgBookClose(props) {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 48 48\" {...props}>\n      <defs>\n        <style>\n          {\n            \".bookClose_svg__cls-3{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px}\"\n          }\n        </style>\n      </defs>\n      <g\n        id=\"bookClose_svg__\\uB808\\uC774\\uC5B4_2\"\n        data-name=\"\\uB808\\uC774\\uC5B4 2\"\n      >\n        <g\n          id=\"bookClose_svg__\\uB808\\uC774\\uC5B4_1-2\"\n          data-name=\"\\uB808\\uC774\\uC5B4 1\"\n        >\n          <path fill=\"none\" d=\"M0 0h48v48H0z\" opacity={0.2} />\n          <path\n            className=\"bookClose_svg__cls-3\"\n            d=\"M37.12 3H10.88a3 3 0 00-.43 0A1.71 1.71 0 009.1 4.11a1.87 1.87 0 00-.1.59v29.18c0 1 0 .94 1.88 1.88l18 9a1.8 1.8 0 002.6-1.2 3 3 0 000-.31v-7.58h5.62A1.88 1.88 0 0039 33.8V4.87A1.88 1.88 0 0037.12 3z\"\n          />\n          <path\n            className=\"bookClose_svg__cls-3\"\n            d=\"M31.5 35.67V14.84a2 2 0 00-1.1-1.78L10.45 3\"\n          />\n        </g>\n      </g>\n    </svg>\n  );\n}\n\nexport default SvgBookClose;\n","import * as React from \"react\";\n\nfunction SvgBookOpen(props) {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 48 48\" {...props}>\n      <defs>\n        <style>\n          {\n            \".bookOpen_svg__cls-3{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px}\"\n          }\n        </style>\n      </defs>\n      <g\n        id=\"bookOpen_svg__\\uB808\\uC774\\uC5B4_2\"\n        data-name=\"\\uB808\\uC774\\uC5B4 2\"\n      >\n        <g\n          id=\"bookOpen_svg__\\uB808\\uC774\\uC5B4_1-2\"\n          data-name=\"\\uB808\\uC774\\uC5B4 1\"\n        >\n          <path fill=\"none\" d=\"M0 0h48v48H0z\" opacity={0.2} />\n          <path\n            className=\"bookOpen_svg__cls-3\"\n            d=\"M4 6.5a27.24 27.24 0 0120 1v34a27.24 27.24 0 00-20-1zM24 7.5a27.24 27.24 0 0120-1v34a27.24 27.24 0 00-20 1\"\n          />\n        </g>\n      </g>\n    </svg>\n  );\n}\n\nexport default SvgBookOpen;\n","import * as React from \"react\";\n\nfunction SvgClose(props) {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 48 48\" {...props}>\n      <defs>\n        <style>\n          {\n            \".close_svg__cls-3{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px}\"\n          }\n        </style>\n      </defs>\n      <g id=\"close_svg__\\uB808\\uC774\\uC5B4_2\" data-name=\"\\uB808\\uC774\\uC5B4 2\">\n        <g\n          id=\"close_svg__\\uB808\\uC774\\uC5B4_1-2\"\n          data-name=\"\\uB808\\uC774\\uC5B4 1\"\n        >\n          <path fill=\"none\" d=\"M0 0h48v48H0z\" opacity={0.2} />\n          <path className=\"close_svg__cls-3\" d=\"M4 4l40 40M4 44L44 4\" />\n        </g>\n      </g>\n    </svg>\n  );\n}\n\nexport default SvgClose;\n","import * as React from \"react\";\n\nfunction SvgScrollHorizontal(props) {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 48 48\" {...props}>\n      <defs>\n        <style>\n          {\n            \".scrollHorizontal_svg__cls-3{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px}\"\n          }\n        </style>\n      </defs>\n      <g\n        id=\"scrollHorizontal_svg__\\uB808\\uC774\\uC5B4_2\"\n        data-name=\"\\uB808\\uC774\\uC5B4 2\"\n      >\n        <g\n          id=\"scrollHorizontal_svg__\\uB808\\uC774\\uC5B4_1-2\"\n          data-name=\"\\uB808\\uC774\\uC5B4 1\"\n        >\n          <path fill=\"none\" d=\"M0 0h48v48H0z\" opacity={0.2} />\n          <circle\n            className=\"scrollHorizontal_svg__cls-3\"\n            cx={24}\n            cy={24}\n            r={5}\n          />\n          <path\n            className=\"scrollHorizontal_svg__cls-3\"\n            d=\"M3 24l12-12M3 24l12 12M45 24L33 12M45 24L33 36\"\n          />\n        </g>\n      </g>\n    </svg>\n  );\n}\n\nexport default SvgScrollHorizontal;\n","import * as React from \"react\";\n\nfunction SvgScrollVertical(props) {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 48 48\" {...props}>\n      <defs>\n        <style>\n          {\n            \".scrollVertical_svg__cls-3{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px}\"\n          }\n        </style>\n      </defs>\n      <g\n        id=\"scrollVertical_svg__\\uB808\\uC774\\uC5B4_2\"\n        data-name=\"\\uB808\\uC774\\uC5B4 2\"\n      >\n        <g\n          id=\"scrollVertical_svg__\\uB808\\uC774\\uC5B4_1-2\"\n          data-name=\"\\uB808\\uC774\\uC5B4 1\"\n        >\n          <path fill=\"none\" d=\"M0 0h48v48H0z\" opacity={0.2} />\n          <circle className=\"scrollVertical_svg__cls-3\" cx={24} cy={24} r={5} />\n          <path\n            className=\"scrollVertical_svg__cls-3\"\n            d=\"M24 3l12 12M24 3L12 15M24 45l12-12M24 45L12 33\"\n          />\n        </g>\n      </g>\n    </svg>\n  );\n}\n\nexport default SvgScrollVertical;\n","import * as React from \"react\";\n\nfunction SvgSearch(props) {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 48 48\" {...props}>\n      <defs>\n        <style>\n          {\n            \".search_svg__cls-3{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px}\"\n          }\n        </style>\n      </defs>\n      <g id=\"search_svg__\\uB808\\uC774\\uC5B4_2\" data-name=\"\\uB808\\uC774\\uC5B4 2\">\n        <g\n          id=\"search_svg__\\uB808\\uC774\\uC5B4_1-2\"\n          data-name=\"\\uB808\\uC774\\uC5B4 1\"\n        >\n          <path fill=\"none\" d=\"M0 0h48v48H0z\" opacity={0.2} />\n          <circle className=\"search_svg__cls-3\" cx={17} cy={17} r={14} />\n          <path className=\"search_svg__cls-3\" d=\"M44 44L27 27\" />\n        </g>\n      </g>\n    </svg>\n  );\n}\n\nexport default SvgSearch;\n","import styled from \"styled-components\";\n// icons\nimport { PrevIcon, NextIcon } from \"lib/svg\";\n// lib\nimport * as styles from \"lib/styles/styles\";\n\nconst MoveBtn = ({ type, onClick }: Props) => {\n  const Icon = type === \"PREV\" ? PrevIcon : NextIcon;\n\n  const msg = type === \"PREV\" ? \"이전 페이지\" : \"다음 페이지\";\n\n  return (\n    <Container onClick={onClick} title={msg}>\n      <Content>\n        <Icon />\n      </Content>\n    </Container>\n  );\n};\n\nconst Container = styled.button`\n  min-width: 60px;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  outline: none;\n\n  &:focus,\n  &:hover {\n    filter: invert(40%) sepia(85%) saturate(1256%) hue-rotate(210deg)\n      brightness(113%) contrast(101%);\n  }\n`;\n\nconst Content = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: 0.1s ${styles.transition};\n\n  & > svg {\n    width: 18px;\n    height: 18px;\n  }\n`;\n\ninterface Props {\n  type: \"PREV\" | \"NEXT\";\n  onClick: () => void;\n}\n\nexport default MoveBtn;\n","// components\nimport Wrapper from 'components/footer/Wrapper'\nimport Item from 'components/footer/Item'\nimport MoveBtn from 'components/footer/MoveBtn'\n\n\nconst Footer = ({ title, nowPage, totalPage, onPageMove }: Props) => {\n  return (\n    <Wrapper>\n      <MoveBtn type=\"PREV\" onClick={() => onPageMove(\"PREV\")} />\n      <Item text={title} />\n      <Item text={`${nowPage} / ${totalPage}`} />\n      <MoveBtn type=\"NEXT\" onClick={() => onPageMove(\"NEXT\")} />\n    </Wrapper>\n  );\n}\n\ninterface Props {\n  title: string;\n  nowPage: number;\n  totalPage: number;\n  onPageMove: (type: \"PREV\" | \"NEXT\") => void;\n}\n\nexport default Footer","import styled from 'styled-components'\n// lib\nimport * as styles from 'lib/styles/styles'\n// icons\nimport { CloseIcon } from 'lib/svg'\n\nconst CloseBtn = ({ onClick }: Props) => {\n  return (\n    <Btn onClick={onClick}>\n      <Icon />\n    </Btn>\n  );\n}\n\nconst Btn = styled.button`\n  position: relative;\n  height: 100%;\n  padding: 0 24px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: .1s ${styles.transition};\n  outline: none;\n\n  &:focus, &:hover {\n    filter: invert(40%) sepia(85%) saturate(1256%) hue-rotate(210deg) brightness(113%) contrast(101%);\n  }\n`;\n\nconst Icon = styled(CloseIcon)`\n  width: 18px;\n  height: 18px;\n`;\n\ninterface Props {\n  onClick: () => void;\n}\n\nexport default CloseBtn;","import React from 'react'\nimport styled from 'styled-components'\n// components\nimport CloseBtn from 'components/sideMenu/CloseBtn'\n// lib\nimport * as styles from 'lib/styles/styles'\nimport zIndex from 'lib/styles/zIndex'\nimport palette from 'lib/styles/palette'\n\nconst Wrapper = ({ title, show, onClose, children }: Props, ref: any) => {\n  return (\n    <Container show={show} ref={ref}>\n      <Header>\n        <span>{title}</span>\n        <CloseBtn onClick={onClose} />\n      </Header>\n      {children}\n    </Container>\n  )\n}\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  position: fixed;\n  width: 340px;\n  max-width: 95vw;\n  height: 100vh;\n  top: 0;\n  right: 0;\n  z-index: ${zIndex.menu};\n  box-shadow: -4px 0 8px 0 rgba(0,0,0,.16);\n  background-color: ${palette.white};\n  border-radius: 16px 0 0 16px;\n  transform: ${({ show }: { show: boolean }) => show \n    ? `translateX(0px) scale(1)`\n    : `translateX(420px) scale(.9)`\n  };\n  transition: .4s ${styles.transition};\n  overflow-y: auto;\n  ${styles.scrollbar(0)};\n`;\n\nconst Header = styled.div`\n  width: 100%;\n  min-height: 64px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding-top: 4px;\n\n  & > span {\n    padding-left: 24px;\n    font-size: 21px;\n    font-weight: 600;\n  }\n`;\n\ninterface Props {\n  title: string;\n  show: boolean;\n  onClose: () => void;\n  children?: React.ReactNode;\n}\n\nexport default React.forwardRef(Wrapper)","import styled from 'styled-components'\n\nconst BookInfo = ({src=\"\", title ,publisher, author}: Props) => {\n  return (\n    <Container>\n      <BookImg src={src} alt={title} />\n      <BookContent>\n        <Title>{title}</Title>\n        <Info>{publisher}</Info>\n        <Info>{author}</Info>\n      </BookContent>\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  display: flex;\n  padding: 24px;\n`;\n\nconst BookImg = styled.img`\n  margin-right: 12px;\n  width: 44%;\n  min-width: 120px;\n  border-radius: 4px;\n  background: #eee;\n`;\n\nconst BookContent = styled.div`\n  flex-grow: 1;\n`;\n\nconst Title = styled.div`\n  font-weight: 500;\n  margin-bottom: 4px;\n`;\n\nconst Info = styled.div`\n  font-size: 14px;\n  margin-bottom: 4px;\n`;\n\ninterface Props {\n  src: string;\n  title: string;\n  publisher: string;\n  author: string;\n}\n\nexport default BookInfo","import styled from 'styled-components'\n// lib\nimport * as styles from 'lib/styles/styles'\nimport palette from 'lib/styles/palette'\n\nconst NavItem = ({ message, onClick }: Props) => {\n  return (\n    <Content onClick={onClick}>\n      <span>{message}</span>\n    </Content>\n  );\n}\n\nconst Content = styled.button`\n  width: 100%;\n  height: 48px;\n  box-sizing: border-box;\n  padding: 12px 24px;\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  background-color: ${palette.gray0};\n  outline: none;\n  \n  & > span {\n    transition: .2s ${styles.transition};\n    font-size: 14px;\n  }\n\n  &:focus, &:hover {\n    & > span {\n      color: ${palette.blue3};\n      margin-left: 12px;\n    }\n  }\n\n  &:last-child {\n    margin-bottom: 32px;\n  }\n`;\n\ninterface Props {\n  message: string;\n  onClick: () => void;\n}\n\nexport default NavItem","import React from \"react\";\nimport { useSelector } from \"react-redux\";\n// components\nimport Wrapper from \"components/sideMenu/Wrapper\";\nimport BookInfo from \"components/nav/BookInfo\";\nimport NavItem from \"components/nav/NavItem\";\n// types\nimport { RootState } from \"slices\";\nimport Book from \"types/book\";\nimport Toc from \"types/toc\";\nimport { MenuControl } from \"lib/hooks/useMenu\";\n\nconst Nav = ({ control, onToggle, onLocation }: Props, ref: any) => {\n  const book = useSelector<RootState, Book>((state) => state.book.book);\n  const bookToc = useSelector<RootState, Toc[]>((state) => state.book.toc);\n\n  /** Click nav item */\n  const onClickItem = (loc: string) => {\n    onLocation(loc);\n    onToggle();\n  };\n\n  const Tocs = bookToc.map((t, idx) => (\n    <NavItem key={idx} message={t.label} onClick={() => onClickItem(t.href)} />\n  ));\n\n  return (\n    <>\n      {control.display && (\n        <Wrapper\n          title=\"Table of Contents\"\n          show={control.open}\n          onClose={onToggle}\n          ref={ref}\n        >\n          <BookInfo\n            src={book.coverURL}\n            title={book.title}\n            publisher={book.publisher}\n            author={book.author}\n          />\n          {Tocs}\n        </Wrapper>\n      )}\n    </>\n  );\n};\n\ninterface Props {\n  control: MenuControl;\n  onToggle: () => void;\n  onLocation: (loc: string) => void;\n}\n\nexport default React.forwardRef(Nav);\n","import styled from 'styled-components'\n\nconst Wrapper = styled.div`\n  box-sizing: border-box;\n  padding: 24px;\n`;\n\nexport default Wrapper","import styled from 'styled-components'\n\nconst OptionWrapper = styled.div`\n  margin-bottom: 24px;\n`;\n\nexport default OptionWrapper","import styled from 'styled-components'\n\nconst OptionTitle = styled.div`\n  font-size: 14px;\n  font-weight: 500;\n  margin-bottom: 16px;\n`;\n\nexport default OptionTitle","import styled from 'styled-components'\n// lib\nimport palette from 'lib/styles/palette'\n\nconst OptionValue = styled.span<{ active: boolean }>`\n  display: inline-block;\n  font-size: 14px;\n  color: ${props => props.active\n    ? palette.blue3\n    : palette.gray4\n  };\n  margin-right: 8px;\n  width: 40px;\n  text-align: right;\n  line-height: 20px;\n`;\n\nexport default OptionValue","import styled from 'styled-components'\n// lib\nimport palette from 'lib/styles/palette'\nimport * as styles from 'lib/styles/styles'\n\nconst SliderValue = ({ \n  active, \n  minValue, \n  maxValue, \n  defaultValue, \n  step, \n  onChange \n}: Props) => {\n  const percentage = Math.round((defaultValue - minValue) / (maxValue - minValue) * 100);\n\n  return (<>\n    <Icon>-</Icon>\n    <SliderWrapper>\n      <SliderBackground />\n      <SliderBar \n        active={active}\n        percentage={percentage}\n      />\n      <Slider\n        type=\"range\" \n        min={minValue}\n        max={maxValue}\n        defaultValue={defaultValue}\n        step={step}\n        onChange={onChange}\n        active={active}\n        disabled={!active} />\n    </SliderWrapper>\n    <Icon>+</Icon>\n  </>);\n}\n\nconst SliderWrapper = styled.div`\n  flex-grow: 1;\n  display: flex;\n  position: relative;\n  width: auto;\n`;\n\nconst SliderBackground = styled.div`\n  position: absolute;\n  width: 100%;\n  height: 6px;\n  background-color: #eee;\n  border-radius: 6px;\n  z-index: 0;\n`;\n\nconst SliderBar = styled.div<{ percentage: number, active: boolean }>`\n  position: absolute;\n  top: 50%;\n  left: 0;\n  transform: translateY(-50%);\n  width: ${({ percentage }) => percentage + '%'};\n  height: 6px;\n  border-radius: 6px 0 0 6px;\n  background-color: ${props => props.active\n    ? palette.blue4\n    : palette.gray2\n  };\n\tz-index: 1;\n`;\n\nconst Slider = styled.input<{ active: boolean }>`\n  appearance: none;\n  width: 100%;\n  height: 6px;\n  background-color: transparent;\n  border-radius: 6px;\n  margin: 0;\n  z-index: 2;\n  outline: none;\n  \n  &::-webkit-slider-thumb {\n    appearance: none;\n    width: 18px;\n    height: 18px;\n    border-radius: 18px;\n    box-shadow: ${styles.boxShadow.regular};\n    background-color: white;\n    transition: .2s ${styles.transition};\n    transition-property: box-shadow, background-color;\n    border: ${props => props.active\n      ? `2px solid ${palette.blue3}`\n      : `2px solid ${palette.gray4}`\n    };\n    cursor: ${props => props.active\n        ? 'pointer'\n        : ''\n      };;\n\n    &:hover {\n      background-color: ${props => props.active\n        ? palette.blue1\n        : ''\n      };\n    }\n\n    &:active {\n      box-shadow: none;\n      background-color: ${props => props.active\n        ? palette.blue3\n        : ''\n      };\n    }\n  }\n\n  &:focus::-webkit-slider-thumb {\n    box-shadow: none;\n    background-color: ${palette.blue3};\n  }\n`;\n\nconst Icon = styled.span`\n  font-size: 12px;\n  font-weight: 500;\n  color: ${palette.gray4};\n  margin: 0 8px;\n  line-height: 20px;\n`;\n\ninterface Props {\n  active: boolean;\n  minValue: number;\n  maxValue: number;\n  defaultValue: number;\n  step: number;\n  onChange: (e: any) => void;\n}\n\nexport default SliderValue","import styled from 'styled-components'\n// components\nimport OptionWrapper from 'components/option/OptionWrapper'\nimport OptionTitle from 'components/option/OptionTitle'\nimport OptionValue from 'components/option/OptionValue'\nimport SliderValue from 'components/option/SliderValue'\n\nconst Slider = ({\n  active,\n  title,\n  minValue,\n  maxValue,\n  defaultValue,\n  step,\n  onChange\n}: Props) => {\n  const onChangeValue = (e: any) => {\n    if (!active) return;\n    onChange(e);\n  }\n  \n  \n  return (\n    <OptionWrapper>\n      <OptionTitle>{title}</OptionTitle>\n      \n      <SliderWrapper>\n        <OptionValue active={active}>{defaultValue}</OptionValue>\n        <SliderValue active={active}\n                     minValue={minValue}\n                     maxValue={maxValue}\n                     defaultValue={defaultValue}\n                     step={step}\n                     onChange={onChangeValue} />\n      </SliderWrapper>\n    </OptionWrapper>\n  );\n}\n\nconst SliderWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  height: 20px;\n`;\n\ninterface Props {\n  active: boolean;\n  title: string;\n  minValue: number;\n  maxValue: number;\n  defaultValue: number;\n  step: number;\n  onChange: (e: any) => void;\n}\n\nexport default Slider","import styled from 'styled-components'\n// components\nimport OptionWrapper from 'components/option/OptionWrapper'\nimport OptionTitle from 'components/option/OptionTitle'\n\nconst ControlIconBtnWrapper = ({ title, children }: Props) => {\n\treturn (\n\t\t<OptionWrapper>\n\t\t\t<OptionTitle>{title}</OptionTitle>\n\t\t\t<BtnWrapper>\n\t\t\t\t{children}\n\t\t\t</BtnWrapper>\n\t\t</OptionWrapper>\n\t);\n}\n\nconst BtnWrapper = styled.div`\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-around;\n\tpadding: 8px 0;\n`;\n\ninterface Props {\n\ttitle: string;\n\tchildren: any[]\n}\n\nexport default ControlIconBtnWrapper","import styled, { css } from 'styled-components'\n// icons\nimport { \n  ScrollHorizontalIcon,\n  ScrollVerticalIcon,\n  BookCloseIcon,\n  BookOpenIcon\n} from 'lib/svg'\n// lib\nimport * as styles from 'lib/styles/styles'\nimport palette from 'lib/styles/palette'\n\nconst ControlIconBtn = ({ type, alt, active, isSelected, onClick }: Props) => {\n  let HeaderIcon = null;\n  switch (type) {\n    case \"ScrollVertical\":\n      HeaderIcon = ScrollVerticalIcon;\n      break;\n    case \"ScrollHorizontal\":\n      HeaderIcon = ScrollHorizontalIcon;\n      break;\n    case \"BookOpen\":\n      HeaderIcon = BookOpenIcon;\n      break;\n    case \"BookClose\":\n      HeaderIcon = BookCloseIcon;\n      break;\n  }\n  \n  const onClickBtn = () => {\n    if (active) onClick();\n  }\n\n  return (\n    <Btn \n      onClick={onClickBtn} \n      isSelected={isSelected}\n      active={active}\n      title={alt}\n    >\n      <Icon>\n        <HeaderIcon />\n      </Icon>\n    </Btn>\n  );\n}\n\nconst Btn = styled.button<{ isSelected: boolean, active: boolean }>`\n  position: relative;\n  height: 100%;\n  padding: 0 12px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 0;\n  transition: .3s ${styles.transition};\n  opacity: ${({active}) => active\n    ? '1'\n    : '.3'\n  };\n  cursor: ${({active}) => active\n    ? 'pointer'\n    : 'default'\n  };\n  outline: none;\n\n  &::before {\n    content: '';\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    margin: auto;\n    z-index: -1;\n    border-radius: 30px;\n    width: ${({isSelected}) => isSelected\n      ? '32px'\n      : '8px'\n    };\n    height: ${({isSelected}) => isSelected\n      ? '32px'\n      : '8px'\n    };\n    opacity: ${({active, isSelected}) => active && isSelected\n      ? '.7'\n      : '0'\n    };\n    transition: .1s ${styles.transition};\n    background-color: ${palette.blue1};\n  }\n\n  &:focus, &:hover {\n    ${({active}) => active\n      ? css`\n        &:before {\n          width: 32px;\n          height: 32px;\n          opacity: 1;\n        }\n      `\n      : \"\"\n    };\n    \n  }\n`;\n\nconst Icon = styled.div`\n  width: 16px;\n  height: 16px;\n\n  & > div, & > svg {\n    width: 16px;\n    height: 16px;\n  }\n`;\n\ntype HeaderIcon = \n  \"ScrollHorizontal\" |\n  \"ScrollVertical\" |\n  \"BookOpen\" |\n  \"BookClose\";\n\ninterface Props {\n  type: HeaderIcon;\n  alt: string;\n  active: boolean;\n  isSelected: boolean;\n  onClick: () => void;\n}\n\nexport default ControlIconBtn","import React from \"react\";\nimport { useState, useEffect } from \"react\";\n// components\nimport Wrapper from \"components/sideMenu/Wrapper\";\nimport OptionLayout from \"components/option/Layout\";\nimport OptionSlider from \"components/option/Slider\";\nimport ControlIconBtnWrapper from \"components/option/ControlIconBtnWrapper\";\nimport ControlIconBtn from \"components/option/ControlIconBtn\";\n// types\nimport { BookStyle, BookFlow } from \"types/book\";\nimport { MenuControl } from \"lib/hooks/useMenu\";\nimport { BookOption } from \"types/book\";\n\nconst Option = (\n  {\n    control,\n    bookStyle,\n    bookOption,\n    bookFlow,\n    onToggle,\n    emitEvent,\n    onBookStyleChange,\n    onBookOptionChange,\n  }: Props,\n  ref: any\n) => {\n  const [fontSize, setFontSize] = useState<number>(bookStyle.fontSize);\n  const [lineHeight, setLineHeight] = useState<number>(bookStyle.lineHeight);\n  const [marginHorizontal, setMarginHorizontal] = useState<number>(\n    bookStyle.marginHorizontal\n  );\n  const [marginVertical, setMarginVertical] = useState<number>(\n    bookStyle.marginVertical\n  );\n  const [isScrollHorizontal, setIsScrollHorizontal] = useState<boolean>(true);\n  const [viewType, setViewType] = useState<ViewType>({\n    active: true,\n    spread: true,\n  });\n\n  /** Change font style and layout */\n  const onChangeSlider = (type: SliderType, e: any) => {\n    if (!e || !e.target) return;\n    switch (type) {\n      case \"FontSize\":\n        setFontSize(e.target.value);\n        break;\n      case \"LineHeight\":\n        setLineHeight(e.target.value);\n        break;\n      case \"MarginHorizontal\":\n        setMarginHorizontal(e.target.value);\n        break;\n      case \"MarginVertical\":\n        setMarginVertical(e.target.value);\n        break;\n      default:\n        break;\n    }\n  };\n\n  /**\n   * Select view direction\n   * @param type Direction\n   */\n  const onClickDirection = (type: \"Horizontal\" | \"Vertical\") => {\n    if (type === \"Horizontal\") {\n      setIsScrollHorizontal(true);\n      setViewType({ ...viewType, active: true });\n      onBookOptionChange({\n        ...bookOption,\n        flow: \"paginated\",\n      });\n    } else {\n      setIsScrollHorizontal(false);\n      setViewType({ ...viewType, active: false });\n      onBookOptionChange({\n        ...bookOption,\n        flow: \"scrolled-doc\",\n      });\n    }\n  };\n\n  /**\n   * Select isSpread\n   * @param isSpread Whether spread view\n   */\n  const onClickViewType = (isSpread: boolean) => {\n    if (isSpread) {\n      setViewType({ ...viewType, spread: true });\n      onBookOptionChange({\n        ...bookOption,\n        spread: \"auto\",\n      });\n    } else {\n      setViewType({ ...viewType, spread: false });\n      onBookOptionChange({\n        ...bookOption,\n        spread: \"none\",\n      });\n    }\n  };\n\n  /* Save userdata */\n  // TODO Fix the infinite re-rendering issue, when inlcude `onBookStyleChange` to dependencies array.\n  /* eslint-disable */\n  useEffect(() => {\n    const timer = window.setTimeout(() => {\n      onBookStyleChange({\n        fontSize,\n        lineHeight,\n        marginHorizontal,\n        marginVertical,\n      });\n    }, 250);\n\n    return () => window.clearTimeout(timer);\n  }, [fontSize, lineHeight, marginHorizontal, marginVertical]);\n  /* eslint-enable */\n\n  /** Re-register close event, when after set */\n  useEffect(() => emitEvent(), [bookStyle, emitEvent]);\n\n  return (\n    <>\n      {control.display && (\n        <Wrapper\n          title=\"Setting\"\n          show={control.open}\n          onClose={onToggle}\n          ref={ref}\n        >\n          <OptionLayout>\n            <ControlIconBtnWrapper title=\"View Direction\">\n              <ControlIconBtn\n                type=\"ScrollHorizontal\"\n                alt=\"Horizontal View\"\n                active={true}\n                isSelected={isScrollHorizontal}\n                onClick={() => onClickDirection(\"Horizontal\")}\n              />\n              <ControlIconBtn\n                type=\"ScrollVertical\"\n                alt=\"Vertical View\"\n                active={true}\n                isSelected={!isScrollHorizontal}\n                onClick={() => onClickDirection(\"Vertical\")}\n              />\n            </ControlIconBtnWrapper>\n            <ControlIconBtnWrapper title=\"View Spread\">\n              <ControlIconBtn\n                type=\"BookOpen\"\n                alt=\"Two Page View\"\n                active={viewType.active}\n                isSelected={viewType.spread}\n                onClick={() => onClickViewType(true)}\n              />\n              <ControlIconBtn\n                type=\"BookClose\"\n                alt=\"One Page View\"\n                active={viewType.active}\n                isSelected={!viewType.spread}\n                onClick={() => onClickViewType(false)}\n              />\n            </ControlIconBtnWrapper>\n            <OptionSlider\n              active={true}\n              title=\"Size\"\n              minValue={8}\n              maxValue={36}\n              defaultValue={fontSize}\n              step={1}\n              onChange={(e) => onChangeSlider(\"FontSize\", e)}\n            />\n            <OptionSlider\n              active={true}\n              title=\"Line height\"\n              minValue={1}\n              maxValue={3}\n              defaultValue={lineHeight}\n              step={0.1}\n              onChange={(e) => onChangeSlider(\"LineHeight\", e)}\n            />\n            <OptionSlider\n              active={true}\n              title=\"Horizontal margin\"\n              minValue={0}\n              maxValue={100}\n              defaultValue={marginHorizontal}\n              step={1}\n              onChange={(e) => onChangeSlider(\"MarginHorizontal\", e)}\n            />\n            <OptionSlider\n              active={bookFlow === \"paginated\"}\n              title=\"Vertical margin\"\n              minValue={0}\n              maxValue={100}\n              defaultValue={marginVertical}\n              step={1}\n              onChange={(e) => onChangeSlider(\"MarginVertical\", e)}\n            />\n          </OptionLayout>\n        </Wrapper>\n      )}\n    </>\n  );\n};\n\ninterface Props {\n  control: MenuControl;\n  bookStyle: BookStyle;\n  bookOption: BookOption;\n  bookFlow: BookFlow;\n  onToggle: () => void;\n  emitEvent: () => void;\n  onBookStyleChange: (bookStyle: BookStyle) => void;\n  onBookOptionChange: (bookOption: BookOption) => void;\n}\n\ntype SliderType =\n  | \"FontSize\"\n  | \"LineHeight\"\n  | \"MarginHorizontal\"\n  | \"MarginVertical\";\n\ntype ViewType = {\n  active: boolean;\n  spread: boolean;\n};\n\nexport default React.forwardRef(Option);\n","import styled from 'styled-components'\n// lib\nimport palette from 'lib/styles/palette'\nimport * as styles from 'lib/styles/styles'\n\nconst Wrapper = styled.button`\n  padding: 16px 24px;\n  display: flex;\n  align-items: flex-start;\n  justify-content: flex-start;\n  background-color: ${palette.gray0};\n  transition: .1s ${styles.transition};\n  cursor: pointer;\n  outline: none;\n  text-align: left;\n  border-bottom: 1px solid ${palette.gray1};\n  \n  &:nth-child(2) {\n    border-top: 1px solid ${palette.gray1};\n  }\n\n  & > div {\n    color: inherit;\n    flex-grow: 1;\n  }\n\n  &:hover > *, &:focus > * {\n    color: ${palette.blue3};\n  }\n`;\n\nexport default Wrapper","import styled from 'styled-components'\n\nconst Title = styled.div`\n  font-size: 14px;\n  font-weight: 600;\n  color: inherit;\n`;\n\nexport default Title","import styled from 'styled-components'\n\nconst Post = styled.div<{ color: string }>`\n  position: relative;\n  font-size: 14px;\n  margin-top: 16px;\n  padding: 8px;\n  box-sizing: border-box;\n\n  &::before {\n    content: '';\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    left: 0;\n    top: 0;\n    background-color: ${({ color }) => color};\n    opacity: .3;\n    border-radius: 8px;\n    mix-blend-mode: multiply;\n  }\n`;\n\nexport default Post","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\n// types\nimport Book from \"types/book\";\nimport Page from \"types/page\";\nimport Toc from \"types/toc\";\nimport Highlight from \"types/highlight\";\n/* \n\tInitial State\n*/\n\n/** 초기 Book 상태 */\nconst initialBook: Book = {\n  coverURL: \"\",\n  title: \"\",\n  description: \"\",\n  published_date: \"\",\n  modified_date: \"\",\n  author: \"\",\n  publisher: \"\",\n  language: \"\",\n};\n\n/** 초기 CurrentPage 상태 */\nconst initialCurrentLocation: Page = {\n  chapterName: \"-\",\n  currentPage: 0,\n  totalPage: 0,\n  startCfi: \"\",\n  endCfi: \"\",\n  base: \"\",\n};\n\nconst initialState: BookState = {\n  book: initialBook,\n  currentLocation: initialCurrentLocation,\n  toc: [],\n  highlights: [],\n};\n\n/* \n\tSlice\n*/\nconst bookSlice = createSlice({\n  name: \"book\",\n  initialState,\n  reducers: {\n    /** Book 갱신 @dispatch */\n    updateBook(state, action: PayloadAction<Book>) {\n      state.book = action.payload;\n    },\n    /** CurrentPage 갱신 @dispatch */\n    updateCurrentPage(state, action: PayloadAction<Page>) {\n      state.currentLocation = action.payload;\n    },\n    /** Book 초기화 @dispatch */\n    clearBook(state) {\n      state.book = initialBook;\n    },\n    /** 목차 갱신 @dispatch */\n    updateToc(state, action: PayloadAction<Toc[]>) {\n      state.toc = action.payload;\n    },\n    /** 목차 초기화 @dispatch */\n    clearToc(state) {\n      state.toc = [];\n    },\n    /** 하이라이트 추가 */\n    pushHighlight(state, action: PayloadAction<Highlight>) {\n      const check = state.highlights.filter(\n        (h) => h.key === action.payload.key\n      );\n      if (check.length > 0) return;\n      state.highlights.push(action.payload);\n    },\n    /** 하이라이트 갱신 */\n    updateHighlight(state, action: PayloadAction<Highlight>) {\n      const new_idx = action.payload.key;\n      const old_idx = state.highlights.map((h) => h.key).indexOf(new_idx);\n      state.highlights.splice(old_idx, 1, action.payload);\n    },\n    /** 하이라이트 삭제 */\n    popHighlight(state, action: PayloadAction<string>) {\n      const idx = state.highlights.map((h) => h.key).indexOf(action.payload);\n      state.highlights.splice(idx, 1);\n    },\n  },\n});\n\nexport interface BookState {\n  book: Book;\n  currentLocation: Page;\n  toc: Toc[];\n  highlights: Highlight[];\n}\n\nexport const {\n  updateBook,\n  clearBook,\n  updateCurrentPage,\n  updateToc,\n  clearToc,\n  pushHighlight,\n  updateHighlight,\n  popHighlight,\n} = bookSlice.actions;\n\nexport default bookSlice.reducer;\n","import { EpubCFI } from 'epubjs'\n// types\nimport { BookStyle, BookFlow } from 'types/book'\n\n\n/**\n * DateTime to `yyyy-mm-dd`\n * @param {Date} time \n */\n export const timeFormatter = (time: Date): string => {\n\tconst yyyy = time.getFullYear();\n\tconst mm = time.getMonth() + 1;\n\tconst dd = time.getDate();\n\tconst msg = `${yyyy}-${mm}-${dd}`;\n\n\treturn msg;\n}\n\n\n/**\n * Comparison of two CFI sizes\n * - -1 : CFI 1 < CFI 2\n * - 0 : CFI 1 == CFI 2\n * - 1 : CFI 1 > CFI 2\n * @param cfi_1 CFI 1\n * @param cfi_2 CFI 2\n */\nexport const compareCfi = (cfi_1: string, cfi_2: string): number => {\n\tconst epubcfi = new EpubCFI();\n\treturn epubcfi.compare(cfi_1, cfi_2);\n};\n\n\n/**\n * Split CFI range into two starting CFI and ending CFI\n * - null : Invalid CFIRange\n * @param cfiRange CFIRange\n */\nexport const cfiRangeSpliter = (cfiRange: string) => {\n\tconst content = cfiRange.slice(8, -1);\n\tconst [origin, start, end] = content.split(',');\n\n\tif (!origin || !start || !end) return null;\n\n\tconst startCfi = `epubcfi(${origin + start})`;\n\tconst endCfi = `epubcfi(${origin + end})`;\n\treturn { startCfi, endCfi }\n}\n\n\n/**\n * Whether the two CFI ranges nested\n * - true : Nested\n * - false : Not nested\n * - null : Invalid CFIRange\n * @param cfiRange1 First CFIRange\n * @param cfiRange2 Second CFIRange\n */\nexport const clashCfiRange = (baseCfiRange: string, targetCfiRange: string) => {\n\tconst splitCfi1 = cfiRangeSpliter(baseCfiRange);\n\tconst splitCfi2 = cfiRangeSpliter(targetCfiRange);\n\n\tif (!splitCfi1 || !splitCfi2) return null;\n\n\tconst { startCfi: s1, endCfi: e1 } = splitCfi1;\n\tconst { startCfi: s2, endCfi: e2 } = splitCfi2;\n\n\tif ((compareCfi(s2, s1) <= 0 && compareCfi(s1, e2) <= 0)\n\t\t||(compareCfi(s2, e1) <= 0 && compareCfi(e1, e2) <= 0)\n\t\t||(compareCfi(s1, s2) <= 0 && compareCfi(e2, e1) <= 0)) {\n\t\treturn true;\n\t}\n\treturn false;\n}\n\n\n/**\n * Extract paragraph CFI from CFIRange\n * - null : Invalid CFIRange\n * @param cfiRange CFIRange\n */\nexport const getParagraphCfi = (cfiRange: string) => {\n\tif (!cfiRange) return;\n\n\tconst content = cfiRange.slice(8, -1);\n\tconst [origin, start, end] = content.split(',');\n\t\n\tif (!origin || !start || !end) return null;\n\n\tconst cfi = `epubcfi(${origin})`;\n\treturn cfi;\n}\n\n\n/**\n * Get specific DOM Element from CFI\n * - **※ Warning**: Other Iframe must not exist in the Reader page!\n * @param cfi CFI\n * @returns HTML Element or Null\n */\nexport const getNodefromCfi = (cfi: string): HTMLElement | null => {\n\tconst epubcfi = cfi.slice(8, -1);\n\n\t/* Remove Id */\n\tconst pureCfi = epubcfi.replace(/\\[.*?\\]/gi, '');\n\n\t/* Only CFI Base */\n\tconst splitCfi = pureCfi.split('!');\n\tif (splitCfi.length < 1 || splitCfi[1] === \"\") {\n\t\treturn null;\n\t}\n\n\t/* Remove Body tag CFI */\n\tconst cfiPath: number[] = splitCfi[1].split('/')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t .slice(2)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t .map(x => Number(x));\n\n\tconst iframe = document.querySelector('iframe');\n\tif (!iframe) return null;\n\t\n\tconst iframeBody = iframe.contentWindow && iframe.contentWindow.document.body;\n\tif (!iframeBody) return null;\n\n\tlet component: HTMLElement | null = iframeBody;\n\n\t/* Find Node based on CFI */\n\tfor (let idx of cfiPath) {\n\t\tconst childNodes: any = component && component.childNodes;\n\n\t\t/* Bookmark / Highlight filtering.. */\n\t\tconst filtered = ([...childNodes].filter(n => !n.dataset \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|| !n.dataset.bookmark\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|| !n.dataset.highlight ));\n\t\tcomponent = filtered[idx - 1];\n\n\t\tif (!component) {\n\t\t\tcomponent = null;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn component;\n}\n\n\n/**\n * Selection absolute location\n * @param viewer viewerRef.current\n * @param bookStyle bookStyle\n * @param bookFlow book-flow\n * @param MIN_VIEWER_WIDTH min viewer width\n * @param MIN_VIEWER_HEIGHT min viewer height\n * @param VIEWER_HEADER_HEIGHT viewer header height\n * @param CONTEXTMENU_WIDTH contextmenu width\n * @returns Contextmenu location\n */\nexport const getSelectionPosition = (\n\tviewer: any,\n\tbookStyle: BookStyle,\n\tbookFlow: BookFlow,\n\tMIN_VIEWER_WIDTH: number,\n\tMIN_VIEWER_HEIGHT: number,\n\tVIEWER_HEADER_HEIGHT: number,\n\tCONTEXTMENU_WIDTH: number\n): { x: number, y: number, height: number, width: number } | null => {\n\tconst { \n\t\tinnerWidth: windowWidth,\n\t\tinnerHeight: windowHeight \n\t} = window;\n\n\tconst iframeWidth = viewer.offsetWidth;\n\n\tconst scrollTop = viewer.querySelector('div').scrollTop;\n\n\tconst iframe = viewer.querySelector('iframe');\n\tconst selection_ = iframe && iframe.contentWindow && iframe.contentWindow.getSelection();\n\tif (!selection_ || selection_.rangeCount === 0) return null;\n\n\tconst range = selection_.getRangeAt(0);\n\tconst {\n\t\tx: selectionX,\n\t\ty: selectionY,\n\t\theight: selectionHeight,\n\t\twidth: selectionWidth\n\t} = range.getBoundingClientRect();\n\n\tconst marginLeft = ~~((windowWidth - MIN_VIEWER_WIDTH) / 100 * bookStyle.marginHorizontal / 2);\n\tconst marginTop = bookFlow === \"scrolled-doc\"\n\t\t? 0\n\t\t: ~~((windowHeight - VIEWER_HEADER_HEIGHT - MIN_VIEWER_HEIGHT) / 100 * bookStyle.marginVertical / 2);\n\n\tconst x = ~~(selectionX % iframeWidth + marginLeft + ( selectionWidth / 2 - CONTEXTMENU_WIDTH / 2));\n\tconst y = ~~(selectionY + selectionHeight + VIEWER_HEADER_HEIGHT + marginTop - scrollTop);\n\n\treturn { \n\t\tx, \n\t\ty, \n\t\theight: selectionHeight, \n\t\twidth: selectionWidth \n\t};\n}\n\n/**\n * Debounce\n * @param func Target function\n * @param timeout delay\n */\n export function debounce<Params extends any[]>(\n  timeout: number,\n  func: (...args: Params) => any,\n): (...args: Params) => void {\n  let timer: NodeJS.Timeout\n  return (...args: Params) => {\n    clearTimeout(timer)\n    timer = setTimeout(() => {\n      func(...args)\n    }, timeout)\n  }\n}","import { useDispatch } from 'react-redux'\n// components\nimport Wrapper from 'components/note/highlight/Wrapper'\nimport Title from 'components/note/highlight/Title'\nimport Post from 'components/note/highlight/Post'\n// slices\nimport { updateHighlight } from 'slices/book'\n// utils\nimport { cfiRangeSpliter } from 'lib/utils/commonUtil'\n// types\nimport HighlightType from 'types/highlight'\n\nconst Highlight = ({ \n  highlight, \n  onClick, \n  emitEvent, \n  viewerRef\n}: Props) => {\n  const dispatch = useDispatch();\n\n\n  /** 하이라이트 클릭 */\n  const onClickHighlight = () => {\n    if (!viewerRef.current) return;\n    \n    const now = new Date().toISOString();\n    dispatch(updateHighlight({\n      ...highlight,\n      accessTime: now\n    }));\n\n    const splitCfi = cfiRangeSpliter(highlight.cfiRange);\n    if (!splitCfi) return;\n\n    const { startCfi } = splitCfi;\n\n    viewerRef.current.setLocation(startCfi);\n\n    emitEvent();\n\n    const svgContainer = viewerRef.current.querySelector(\"svg\");\n    if (!svgContainer) return;\n\n    const targetSvg = svgContainer.querySelector(`g[data-epubcfi=\"${highlight.cfiRange}\"]`);\n    if (!targetSvg) return;\n\n    onClick(targetSvg.childNodes[0]);\n  }\n  \n  return (\n    <Wrapper onClick={onClickHighlight}>\n      <div>\n        <Title>{highlight.chpaterName}</Title>\n\n        <Post color={highlight.color}>{highlight.content}</Post>\n      </div>\n    </Wrapper>\n  );\n}\n\ninterface Props {\n  highlight: HighlightType;\n  onClick: (highlightNode: any) => void;\n  emitEvent: () => void;\n  viewerRef: any;\n}\n\nexport default Highlight","import styled from 'styled-components'\n\nconst Layout = styled.div`\n  flex-grow: 1;\n  display: flex;\n  flex-direction: column;\n  box-sizing: border-box;\n  padding: 24px 0;\n`;\n\nexport default Layout","import styled from 'styled-components'\n// lib\nimport palette from 'lib/styles/palette'\n\nconst MenuEmpty = ({ text }: Props) => {\n  return <Content>{text}</Content>;\n}\n\nconst Content = styled.div`\n  flex-grow: 1;\n  height: auto;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: ${palette.blue2};\n  font-size: 14px;\n`;\n\ninterface Props {\n  text: string;\n}\n\nexport default MenuEmpty","import React, { useState, useEffect } from 'react'\nimport { useSelector } from 'react-redux'\n// containers\nimport Highlight from 'containers/menu/commons/Highlight'\n// components\nimport Wrapper from 'components/sideMenu/Wrapper'\nimport LearningLayout from 'components/note/Layout'\nimport MenuEmpty from 'components/sideMenu/MenuEmpty'\n// types\nimport { RootState } from 'slices'\nimport HighlightType from 'types/highlight'\nimport { MenuControl } from 'lib/hooks/useMenu'\n\n\nconst Note = ({ \n  control, \n  onToggle, \n  onClickHighlight, \n  emitEvent,\n  viewerRef \n}: Props, ref: any) => {\n  const highlights = useSelector<RootState, HighlightType[]>(state => state.book.highlights);\n  const [highlightList, setHighlightList] = useState<any[]>([]);\n\n\n  /** Set highlight contents */\n  useEffect(() => {\n    const Items = highlights.map(h => <Highlight key={h.key} \n                                                 highlight={h}\n                                                 onClick={onClickHighlight} \n                                                 emitEvent={emitEvent}\n                                                 viewerRef={viewerRef} />\n    );\n    setHighlightList(Items); \n  }, [\n    viewerRef,\n    highlights,\n    onClickHighlight,\n    emitEvent,\n    setHighlightList\n  ]);\n\n\n  return (<>\n    {control.display && <Wrapper title=\"Highlight\"\n                                 show={control.open}\n                                 onClose={onToggle}\n                                 ref={ref} >\n      <LearningLayout>\n        {highlightList.length > 0\n          ? highlightList\n          : <MenuEmpty text=\"Empty highlights!\" />\n        }\n      </LearningLayout>\n    </Wrapper>}\n  </>);\n}\n\ninterface Props {\n  control: MenuControl;\n  onToggle: () => void;\n  onClickHighlight: (highlightNode: any) => void;\n  emitEvent: () => void;\n  viewerRef: any;\n}\n\nexport default React.forwardRef(Note)","import { useState, useEffect, useCallback, useRef } from \"react\";\nimport { useSelector } from \"react-redux\";\n// utils\nimport { getParagraphCfi } from \"lib/utils/commonUtil\";\n// slices\n// types\nimport { RootState } from \"slices\";\nimport Highlight from \"types/highlight\";\nimport Selection from \"types/selection\";\n\nconst ContextMenu = ({\n  active,\n  viewerRef,\n  selection,\n  onAddHighlight,\n  onRemoveHighlight,\n  onUpdateHighlight,\n  onContextmMenuRemove,\n}: Props) => {\n  const highlights = useSelector<RootState, Highlight[]>(\n    (state) => state.book.highlights\n  );\n\n  const menuRef = useRef<HTMLDivElement | null>(null);\n\n  const [isEraseBtn, setIsEraseBtn] = useState<boolean>(false);\n\n  /**\n   * Remove contextmenu\n   * @param e Mouse Event\n   * @param e.path\n   */\n  const onRemove = useCallback(\n    ({ path }: any) => {\n      if (!menuRef.current) return;\n\n      if ([...path].includes(menuRef.current)) return;\n      onContextmMenuRemove();\n    },\n    [menuRef, onContextmMenuRemove]\n  );\n\n  /**\n   * Arrow event\n   * @param e Keyboard Event\n   * @param e.key\n   */\n  const onKeyPress = useCallback(\n    ({ key }: any) => {\n      key && key === \"ArrowLeft\" && onContextmMenuRemove();\n      key && key === \"ArrowRight\" && onContextmMenuRemove();\n    },\n    [onContextmMenuRemove]\n  );\n\n  /** Check whether the menu button is visible */\n  useEffect(() => {\n    if (!active) setIsEraseBtn(false);\n\n    const paragraphCfi = getParagraphCfi(selection.cfiRange);\n    if (!paragraphCfi) return;\n\n    const filtered = highlights.filter(\n      (highlight) => highlight.key === paragraphCfi + selection.cfiRange\n    );\n\n    if (!filtered.length) return;\n    if (selection.update) {\n      setIsEraseBtn(true);\n    } else {\n      setIsEraseBtn(false);\n    }\n  }, [active, highlights, selection.cfiRange, selection.update]);\n\n  /** Register contextmenu events */\n  useEffect(() => {\n    if (!viewerRef.current) return;\n\n    const iframe = document.querySelector(\"iframe\");\n    const node =\n      iframe && iframe.contentWindow && iframe.contentWindow.document;\n    const scrolledTarget = viewerRef.current.querySelector(\"div\");\n\n    if (active) {\n      scrolledTarget &&\n        scrolledTarget.addEventListener(\"scroll\", onContextmMenuRemove);\n      node && node.addEventListener(\"mousedown\", onRemove);\n      node && node.addEventListener(\"keyup\", onKeyPress);\n      document.addEventListener(\"mousedown\", onRemove);\n      document.addEventListener(\"keyup\", onKeyPress);\n    } else {\n      scrolledTarget &&\n        scrolledTarget.removeEventListener(\"scroll\", onContextmMenuRemove);\n      node && node.removeEventListener(\"mousedown\", onRemove);\n      node && node.removeEventListener(\"keyup\", onKeyPress);\n      document.removeEventListener(\"mousedown\", onRemove);\n      document.removeEventListener(\"keyup\", onKeyPress);\n    }\n\n    return () => {\n      node && node.removeEventListener(\"mousedown\", onContextmMenuRemove);\n      node && node.removeEventListener(\"keyup\", onKeyPress);\n      document.removeEventListener(\"keyup\", onKeyPress);\n    };\n  }, [viewerRef, active, onRemove, onContextmMenuRemove, onKeyPress]);\n\n  /** Set modified contextmenu height & whether menu is reverse */\n  useEffect(() => {\n    const menuPadding = 8;\n    const itemHeight = 32;\n    let itemCnt = 0;\n\n    if (isEraseBtn) itemCnt += 1;\n\n    const defaultHeight = itemCnt * itemHeight + menuPadding;\n    let y_ = selection.y;\n    const { innerHeight } = window;\n\n    if (selection.y + defaultHeight > innerHeight) {\n      y_ = selection.y - selection.height - defaultHeight;\n      if (y_ < 0) {\n        y_ = 8;\n      } else {\n      }\n    } else {\n    }\n  }, [selection.y, selection.height, isEraseBtn]);\n\n  return <></>;\n};\n\ninterface Props {\n  active: boolean;\n  viewerRef: any;\n  selection: Selection;\n  onAddHighlight: (color: string) => void;\n  onRemoveHighlight: (key: string, cfiRange: string) => void;\n  onUpdateHighlight: (highlight: Highlight | null, color: string) => void;\n  onContextmMenuRemove: () => void;\n}\n\nexport default ContextMenu;\n","import { keyframes } from 'styled-components';\n\nconst fadeIn = keyframes`\n\t0% { opacity: 0; }\n\t100% { opacity: 1;}\n`;\nconst fadeOut = keyframes`\n\t0% { opacity: 1; }\n\t100% { opacity: 0; }\n`;\nconst fadeInTop = keyframes`\n\t0% { opacity: 0; transform: translateY(-40px); }\n\t100% { opacity: 1; transform: translateY(0); }\n`;\nconst fadeOutTop = keyframes`\n\t0% { opacity: 1; transform: translateY(0); }\n\t100% { opacity: 0; transform: translateY(-40px); }\n`;\nconst fadeInBottom = keyframes`\n\t0% { opacity: 0; transform: translateY(40px); }\n\t100% { opacity: 1; transform: translateY(0); }\n`;\nconst fadeOutBottom = keyframes`\n\t0% { opacity: 1; transform: translateY(0); }\n\t100% { opacity: 0; transform: translateY(40px); }\n`;\nconst fadeInLeft = keyframes`\n\t0% { opacity: 0; transform: translateX(-40px); }\n\t100% { opacity: 1; transform: translateX(0); }\n`;\nconst fadeOutLeft = keyframes`\n\t0% { opacity: 1; transform: translateX(0); }\n\t100% { opacity: 0; transform: translateX(-40px); }\n`;\nconst fadeInRight = keyframes`\n\t0% { opacity: 0; transform: translateX(40px); }\n\t100% { opacity: 1; transform: translateX(0); }\n`;\nconst fadeOutRight = keyframes`\n\t0% { opacity: 1; transform: translateX(0); }\n\t100% { opacity: 0; transform: translateX(40px); }\n`;\nconst spin = keyframes`\n\tfrom { transform: rotate(0deg); }\n\tto { transform: rotate(360deg); }\n`;\n\nconst animations = {\n\tfadeIn,\n\tfadeOut,\n\tfadeInTop,\n\tfadeOutTop,\n\tfadeInBottom,\n\tfadeOutBottom,\n\tfadeInLeft,\n\tfadeOutLeft,\n\tfadeInRight,\n\tfadeOutRight,\n\tspin\n};\n\nexport default animations","import styled from 'styled-components'\n// lib\nimport * as styles from 'lib/styles/styles'\nimport media from 'lib/styles/media'\nimport palette from 'lib/styles/palette'\nimport animations from 'lib/styles/animations'\n// types\nimport SnackbarType from 'types/snackbar'\n\nconst Snackbar = ({ onClick, text, type }: Props)=> {\n\treturn (\n\t  <Container onClick={onClick} type={type}>\n\t  \t<Content>\n\t  \t  <Message>{text}</Message>\n\t  \t</Content>\n\t  </Container>\n\t);\n}\n\nconst Container = styled.div<{ type: SnackbarType }>`\n\tposition: relative;\n\twidth: 320px;\n\theight: auto;\n\tmax-height: 800px;\n\tbackground-color: ${({ type }) => {\n\t\t\tif (type === 'SUCCESS') {\t\n\t\t\t\treturn palette.green4;\n\t\t\t} else if (type === 'WARNING') {\n\t\t\t\treturn palette.orange4;\n\t\t\t} else if (type === 'ERROR') {\n\t\t\t\treturn palette.red3;\n\t\t\t} else if (type === 'INFO') {\n\t\t\t\treturn palette.blue4;\n\t\t\t} else {\n\t\t\t\treturn palette.gray4;\n\t\t\t}\n\t\t}\n\t};\n\tbox-shadow: ${styles.boxShadow.regular};\n\tborder-radius: 4px;\n\tanimation: ${animations.fadeInBottom} .3s cubic-bezier(0.25,0.1,0.25,1),\n\t\t\t\t\t\t ${animations.fadeOutBottom} .5s cubic-bezier(0.25,0.1,0.25,1) 3.6s;\n\tcursor: pointer;\n\ttransition: .2s ${styles.transition};\n\t${styles.noselect};\n\n\t&:active {\n\t\ttransform: scale(.97, .97);\n\t}\n\n\t${media.small} {\n\t\tborder-radius: 0px;\n\t\twidth: 100%;\n\t\tmin-height: 1.8rem;\n\t}\n`;\n\nconst Content = styled.div`\n\tposition: relative;\n\tdisplay: flex;\n\twidth: 100%;\n\theight: auto;\n\tmin-height: 2rem;\n\tbox-sizing: border-box;\n\tpadding: 12px 20px;\n\n\t${media.small} {\n\t\tmin-height: 1.6rem;\n\t\tline-height: 1.6rem;\n\t}\n`;\n\nconst Message = styled.div`\n\tposition: relative;\n\tflex-grow: 1;\n\tcolor: white;\n\tfont-size: 14px;\n\twhite-space: pre-wrap;\n\tword-break: keep-all;\n\tvertical-align: top;\n`;\n\n\ninterface Props {\n\tonClick(e: React.MouseEvent<HTMLDivElement, MouseEvent>): void;\n\ttext: string;\n\ttype: SnackbarType;\n}\n\nexport default Snackbar","import { createAsyncThunk, createSlice, PayloadAction } from '@reduxjs/toolkit'\n// types\nimport Snackbar from 'types/snackbar'\n\n\nconst RefEvent: number[] = [];\n\n\n/* \n\tThunks\n*/\nexport const newSnackbar = createAsyncThunk(\n\t'snackbar/newSnackbar',\n\tasync (\n\t\t{ text, type }: SnackbarState, \n\t\t{ dispatch }\n\t) => {\n\t\tif(RefEvent.length !== 0) {\n\t\t\tlet event = RefEvent.shift();\n\t\t\tclearTimeout(event);\n\t\t}\n\t\tdispatch(SnackbarSlice.actions.deleteSnackbar());\n\t\tawait setTimeout(function() {\n\t\t\tdispatch(SnackbarSlice.actions.appendSnackbar({ text, type: type ? type: \"INFO\" }));\n\t\t\tlet event = window.setTimeout(function() {\n\t\t\t\tdispatch(SnackbarSlice.actions.deleteSnackbar());\n\t\t\t}, 4000);\n\t\t\tRefEvent.push(event);\n\t\t}, 50);\n\t}\n);\n\n/* \n\tInitial State\n*/\n\nconst initialState: SnackbarState = {\n\ttext: \"\",\n\ttype: \"INFO\"\n}\n\n\n/* \n\tSlice\n*/\nconst SnackbarSlice = createSlice({\n\tname: 'snackbar',\n\tinitialState,\n\treducers: {\n\t\t/** 스낵바 갱신 @dispatch */\n\t\tappendSnackbar(state, action: PayloadAction<SnackbarState>) {\n\t\t\tstate.text = action.payload.text;\n\t\t\tstate.type = action.payload.type;\n\t\t},\n\t\t/** 스낵바 초기화 @dispatch */\n\t\tdeleteSnackbar(state) {\n\t\t\tstate.text = \"\";\n\t\t\tstate.type = \"INFO\"\n\t\t}\n\t}\n});\n\n\nexport interface SnackbarState {\n\ttext: string;\n\ttype: Snackbar;\n}\n\nexport const {\n\tappendSnackbar,\n\tdeleteSnackbar\n} = SnackbarSlice.actions\n\nexport default SnackbarSlice.reducer","import styled from 'styled-components'\nimport { useSelector, useDispatch } from 'react-redux'\n// components\nimport Snackbar from 'components/commons/Snackbar'\n// lib\nimport zIndex from 'lib/styles/zIndex'\nimport media from 'lib/styles/media'\n// slices\nimport { deleteSnackbar } from 'slices/snackbar'\n// types\nimport { RootState } from 'slices'\nimport { SnackbarState } from 'slices/snackbar'\n\n\nconst SnackbarWrapper = ()=> {\n  const dispatch = useDispatch();\n\tconst snackbar = useSelector<RootState, SnackbarState>(state => state.snackbar);\n\t\n\n\tconst onClick = (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n\t\tif (e) {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t}\n\t\tdispatch(deleteSnackbar());\n\t};\n\n\t\n\treturn (\n\t\t<Container>\n\t\t\t{snackbar.text !== '' && <Snackbar onClick={onClick} \n                                         text={snackbar.text} \n                                         type={snackbar.type} />}\n\t\t</Container>\n\t);\n}\n\nconst Container = styled.div`\n\tposition: fixed;\n\ttop: 40px;\n\tright: 30px;\n\twidth: 320px;\n\theight: auto;\n\tz-index: ${zIndex.snackbar};\n\n\t${media.small} {\n\t\twidth: 100%;\n\t\ttop: initial;\n\t\tbottom: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tmargin: auto;\n\t}\n`;\n\nexport default SnackbarWrapper","import styled from 'styled-components'\n// lib\nimport * as styles from 'lib/styles/styles'\n\nconst ViewerWrapper = styled.div`\n  position: relative;\n  width: 100vw;\n  height: 100vh;\n  overflow-x: hidden;\n  display: flex;\n  flex-direction: column;\n  ${styles.scrollbar(0)};\n`;\n\nexport default ViewerWrapper","import styled, { keyframes } from 'styled-components'\n\nconst LoadingView = () => {\n  return (\n    <LoadingWrapper>\n      <Wrapper>\n        <Content />\n      </Wrapper>\n    </LoadingWrapper>\n  );\n}\n\nconst spin = keyframes`\n\tfrom { transform: rotate(0deg); }\n\tto { transform: rotate(360deg); }\n`;\n\nconst LoadingWrapper = styled.div`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst Wrapper = styled.div`\n\tposition: relative;\n\twidth: 100%;\n\theight: 30px;\n\tmargin: 30px 0;\n\ttext-align: center;\n`;\n\nconst Content = styled.div`\n\tdisplay: inline-block;\n\twidth: 30px;\n\theight: 30px;\n\tborder: 3px solid #ebf1ff;\n\tborder-radius: 50%;\n\tborder-top-color: #3972ff;\n\tanimation: ${spin} 1s ease-in-out infinite;\n`;\n\nexport default LoadingView","import { configureStore } from \"@reduxjs/toolkit\";\nimport { combineReducers } from 'redux'\n// reducers\nimport book from 'slices/book'\nimport snackbar from 'slices/snackbar'\n\n/**\n * 모든 리듀서가 결합된 Root 리듀서\n */\nconst reducer = combineReducers({\n\tbook,\n\tsnackbar\n});\n\nexport type RootState = ReturnType<typeof reducer>\n\n/**\n * 공통 Store\n */\nconst store = configureStore({\n\treducer,\t\n});\n\nexport default store","import { useState, useEffect, useCallback } from \"react\";\n\n/**\n * Epub Reader 메뉴를 컨트롤 하는 hook\n * - control의 display를 Menu 생성/제거 플래그로 이용합니다.\n * - control의 show를 Animaton 플래그로 이용합니다.\n * - Menu 이외의 영역 클릭시 Close Event 발동\n *\n * @param ref DOM을 가지고 있는 useRef\n * @param delay 애니메이션 딜레이 시간(ms)\n *\n * @example\n * const Viewer = () => {\n *   const menuDelay = 300;\n *\n *   const ref = useRef<HTMLDivElement | null>(null);\n *   const [control, onToggle] = usemenu(ref, menuDelay);\n *\n *   return (<>\n *     <MenuOpenBtn onClick={onToggle} />\n *     <Menu control={control} onToggle={onToggle} ref={ref} />\n *   </>);\n * }\n *\n * const Menu = ({ control, onToggle }, ref) => {\n *   return (<>\n *     {control.display && <MenuWrapper show={control.show}\n *                                      delay={menuDelay}\n *                                      ref={ref}>\n *       <CloseBtn onClick={onToggle} />\n *     </MenuWrapper>}\n *   </>);\n * }\n *\n * const MenuWrapper = styled.div<{show: boolean; delay: boolean;}>`\n *   transform: ${({show}) => show\n *     ? \"translateX(0px)\"\n *     : \"translateX(420px)\"\n *   };\n *   transition: ${({delay}) => `${delay}ms ease`};\n * `;\n */\nfunction useMenu(ref: { current: any }, delay: number) {\n  const [eventSignal, setEventSignal] = useState<boolean>(true);\n  const [control, setControl] = useState<MenuControl>({\n    display: false,\n    open: false,\n  });\n\n  /** Menu 토글 */\n  const onToggle = useCallback(() => {\n    let event: any = null;\n    window.clearTimeout(event);\n    if (!control.display) {\n      setControl({ display: true, open: false });\n      event = window.setTimeout(\n        () => setControl({ display: true, open: true }),\n        0\n      );\n    } else {\n      setControl({ display: true, open: false });\n      event = window.setTimeout(\n        () => setControl({ display: false, open: false }),\n        delay - 50\n      );\n    }\n  }, [control.display, delay]);\n\n  /**\n   * 메뉴 닫기\n   * - Event path에서 메뉴가 포함되어있지 않으면, 함수를 실행합니다.\n   */\n  const onClose = useCallback(\n    (e: any) => {\n      if (!ref || !ref.current) return;\n      if (e.path && !e.path.includes(ref.current)) {\n        onToggle();\n      }\n    },\n    [ref, onToggle]\n  );\n\n  /**\n   * 이벤트 재등록\n   * - '보기설정' 에서 rendition이 재 렌더링 될 때, 이벤트를 재등록하기 위한 함수\n   * - Iframe 생성 시간 대기 [About 250ms]\n   */\n  const emitEvent = useCallback(() => {\n    window.setTimeout(() => setEventSignal(true), 300);\n  }, [setEventSignal]);\n\n  /**\n   * 목차 닫기 이벤트 등록\n   * - Epub이 iframe으로 등록되므로, iframe에도 Event를 등록시켜줍니다.\n   */\n  useEffect(() => {\n    if (!eventSignal && !control.display) return;\n\n    const epubIframe = document.querySelector(\"iframe\");\n\n    if (control.display) {\n      document.addEventListener(\"click\", onClose);\n      if (epubIframe && epubIframe.contentWindow) {\n        epubIframe.contentWindow.document.addEventListener(\"click\", onClose);\n      }\n    } else {\n      document.removeEventListener(\"click\", onClose);\n      if (epubIframe && epubIframe.contentWindow) {\n        epubIframe.contentWindow.document.removeEventListener(\"click\", onClose);\n      }\n    }\n\n    setEventSignal(false);\n\n    return () => {\n      document.removeEventListener(\"click\", onClose);\n      if (epubIframe && epubIframe.contentWindow) {\n        epubIframe.contentWindow.document.removeEventListener(\"click\", onClose);\n      }\n    };\n  }, [control.display, onClose, eventSignal]);\n\n  return [control, onToggle, emitEvent] as const;\n}\n\nexport type MenuControl = {\n  display: boolean;\n  open: boolean;\n};\n\nexport default useMenu;\n","import ViewerLayout from 'types/viewerLayout'\n\n/** Epub viewer layout size */\nconst viewerLayout: ViewerLayout = {\n  MIN_VIEWER_WIDTH: 300,  \n  MIN_VIEWER_HEIGHT: 300,\n  VIEWER_HEADER_HEIGHT: 64,\n  VIEWER_FOOTER_HEIGHT: 60,\n\tVIEWER_SIDEMENU_WIDTH: 0\n}\n\nexport const contextmenuWidth = 160;\n\nexport default viewerLayout","import React, { useState, useEffect, useCallback } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\n// slices\nimport { pushHighlight, popHighlight, updateHighlight } from 'slices/book'\nimport { newSnackbar } from 'slices/snackbar'\n// utils\nimport {  \n\tgetParagraphCfi,\n\tclashCfiRange, \n\tgetSelectionPosition,\n\tcompareCfi,\n\tcfiRangeSpliter,\n\tgetNodefromCfi\n} from 'lib/utils/commonUtil'\n// styles\nimport viewerLayout, { contextmenuWidth } from 'lib/styles/viewerLayout'\n// types\nimport { RootState } from 'slices'\nimport { BookStyle, BookFlow } from 'types/book'\nimport Page from 'types/page'\nimport Selection from 'types/selection'\nimport Highlight from 'types/highlight'\n\n\n/**\n * Epub Reader의 Highlight 관련 hook\n * - [selection]: 현재 selection의 정보\n * - [onSelection]: selection 적용 함수 (Iframe에 selection 이벤트로 등록해야 합니다.)\n * - [onClickHighlight]: highlight 클릭 함수\n * - [onAddHighlight] highlight 생성 함수\n * - [onRemoveHighlight]: highlight 제거 함수\n * - [onUpdateHighlight]: highlight 갱신 함수\n *\n * @param viewerRef Viewer에 등록된 가지고 있는 useRef\n * @param setIsContextMenu Contextmenu를 컨트롤 할 수 있는 useState 함수\n * \n * @example\n * const [isContextMenu, setIsContextMenu] = useState<boolean>(false);\n * \n * const { \n * \tselection, \n * \tonSelection, \n * \tonClickHighlight,\n * \tonRemoveHighlight\n * } = useSelection(viewerRef, setIsContextMenu);\n */\nconst useHighlight = (\n\tviewerRef: any, \n\tsetIsContextMenu: React.Dispatch<React.SetStateAction<boolean>>,\n\tbookStyle: BookStyle,\n\tbookFlow: BookFlow\n) => {\n\tconst dispatch = useDispatch();\n\tconst currentLocation = useSelector<RootState, Page>(state => state.book.currentLocation);\n\tconst highlights = useSelector<RootState, Highlight[]>(state => state.book.highlights);\n\n\tconst [selection, setSelection] = useState<Selection>({\n\t\tupdate: false,\n\t\tx: 0,\n\t\ty: 0,\n\t\theight: 0,\n\t\tcfiRange: '',\n\t\tcontent: ''\n\t});\n\t\n\n\t/** \n\t * Selection 발동 이벤트\n\t * @param cfiRange CfiRange\n\t * @return Whether event is success\n\t */\n\tconst onSelection = useCallback((cfiRange: string): boolean => {\n\t\tif (!viewerRef.current) return false;\n\n\t\tconst iframe = viewerRef.current.querySelector('iframe');\n\t\tif (!iframe) return false;\n\n\t\tconst iframeWin = iframe.contentWindow;\n\t\tif (!iframeWin) return false;\n\t\t\n\t\tconst filtered = highlights.filter(\n\t\t\thighlight => clashCfiRange(highlight.cfiRange, cfiRange)\n\t\t);\n\n\t\tif (filtered.length > 0) {\n\t\t\tdispatch(newSnackbar({\n        text: \"There are already registered highlights in your selection.\", \n        type: \"WARNING\" \n      }));\n\n\t\t\tiframeWin.getSelection().removeAllRanges();\n\t\t\treturn false;\n\t\t}\n\n\t\tconst position = getSelectionPosition(\n\t\t\tviewerRef.current,\n\t\t\tbookStyle,\n\t\t\tbookFlow,\n\t\t\tviewerLayout.MIN_VIEWER_WIDTH,\n\t\t\tviewerLayout.MIN_VIEWER_HEIGHT,\n\t\t\tviewerLayout.VIEWER_HEADER_HEIGHT,\n\t\t\tcontextmenuWidth\n\t\t);\n\t\tif (!position) return false;\n\n\t\tconst { x, y, height } = position;\n\n\t\tconst content = iframeWin.getSelection().toString().trim();\n\n\t\tif (content.length === 0) return false;\n\t\t\n\t\tsetSelection({ \n\t\t\tupdate: false,\n\t\t\tx, \n\t\t\ty,\n\t\t\theight,\n\t\t\tcfiRange,\n\t\t\tcontent\n\t\t});\n\t\t\n\t\treturn true;\n\t}, [\n\t\tdispatch, \n\t\tviewerRef,\n\t\thighlights, \n\t\tbookFlow, \n\t\tbookStyle,\n\t\tsetSelection\n\t]);\n\n\t/** Highlight 클릭 이벤트 */\n\tconst onClickHighlight = useCallback((highlightNode: HTMLElement) => {\n\t\tconst targetNode = highlightNode.parentElement;\n\t\tif (!targetNode) return;\n\n\t\tconst cfiRange = targetNode.dataset.epubcfi;\n\t\tif (!cfiRange) return;\n\n\t\tconst { x, y, width, height } = targetNode.getBoundingClientRect();\n\n\t\tsetSelection({ \n\t\t\tupdate: true,\n\t\t\tx: x + width / 2 - contextmenuWidth / 2, \n\t\t\ty: y + height,\n\t\t\theight,\n\t\t\tcfiRange,\n\t\t\tcontent: \"\"\n\t\t});\n\t}, [setSelection]);\n\n\t/** 하이라이트 생성 함수 */\n\tconst onAddHighlight = useCallback((color: string) => {\n    const paragraphCfi = getParagraphCfi(selection.cfiRange);\n    if (!paragraphCfi) return;\n    \n    const highlight: Highlight = {\n      key: paragraphCfi + selection.cfiRange,\n      accessTime: new Date().toISOString(),\n      createTime: new Date().toISOString(),\n      color,\n      paragraphCfi,\n      cfiRange: selection.cfiRange,\n      chpaterName: currentLocation.chapterName,\n      pageNum: currentLocation.currentPage,\n      content: selection.content\n    };\n\n    dispatch(pushHighlight(highlight));\n\n\t\tsetSelection({ ...selection, update: true });\n  }, [dispatch, selection, currentLocation]);\n\n\t/** \n   * 하이라이트 수정\n   * @param color 색상 Hex 코드\n   */\n\tconst onUpdateHighlight = useCallback((highlight: Highlight | null, color: string) => {\n\t\tif (!highlight) return;\n\n    dispatch(updateHighlight({\n      ...highlight,\n      color\n    }));\n  }, [dispatch]);\n\n\t/** \n\t * 하이라이트 제거 함수 \n\t * @param key 북마크 식별값\n\t */\n\t const onRemoveHighlight = useCallback((key: string, cfiRange: string) => {\n\t\tif (!viewerRef.current || !key) return;\n\n\t\tdispatch(popHighlight(key));\n\n\t\tdispatch(newSnackbar({\n\t\t\ttext: \"The highlight removed successful!\", \n\t\t\ttype: \"INFO\" \n\t\t}));\n\t\t\n\t\tviewerRef.current.offHighlight(cfiRange);\n\t}, [dispatch, viewerRef]);\n\n\n\t/**\n\t * 하이라이트 여부 확인\n\t * - 페이지 변경에 따른 하이라이트 확인 및 적용\n\t */\n\t useEffect(() => {\n\t\tif (!viewerRef.current) return;\n\n\t\tconst iframe = viewerRef.current.querySelector('iframe');\n\t\tif (!iframe) return;\n\n\t\tconst iframeWin = iframe.contentWindow;\n\t\tif (!iframeWin) return;\n\n\t\thighlights.forEach(highlight => {\n\t\t\tconst cfiRange = cfiRangeSpliter(highlight.cfiRange);\n\t\t\tif (!cfiRange) return;\n\n\t\t\tconst { startCfi } = cfiRange;\n\n\t\t\tif (compareCfi(currentLocation.startCfi, startCfi) < 1\n\t\t\t\t&& compareCfi(currentLocation.endCfi, startCfi) > -1) {\n\t\t\t\tconst node = getNodefromCfi(highlight.paragraphCfi);\n\t\t\t\tif (!node) return;\n\n\t\t\t\tviewerRef.current.onHighlight(\n\t\t\t\t\thighlight.cfiRange,\n\t\t\t\t\t(e: any) => {\n\t\t\t\t\t\tonClickHighlight(e.target);\n\t\t\t\t\t\tsetIsContextMenu(true);\n\t\t\t\t\t},\n\t\t\t\t\thighlight.color \n\t\t\t\t);\n\n\t\t\t\tiframeWin.getSelection().removeAllRanges();\n\t\t\t}\n\t\t});\n\t}, [\n\t\tdispatch,\n\t\tviewerRef, \n\t\tcurrentLocation, \n\t\thighlights, \n\t\tonRemoveHighlight,\n\t\tonClickHighlight,\n\t\tsetIsContextMenu\n\t]);\n\n\n\treturn { \n\t\tselection, \n\t\tonSelection, \n\t\tonClickHighlight,\n\t\tonAddHighlight,\n\t\tonRemoveHighlight,\n\t\tonUpdateHighlight\n\t};\n}\n\nexport default useHighlight;","import { useState, useRef, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { Provider } from \"react-redux\";\nimport { ReactEpubViewer } from \"react-epub-viewer\";\n// containers\nimport Header from \"containers/Header\";\nimport Footer from \"containers/Footer\";\nimport Nav from \"containers/menu/Nav\";\nimport Option from \"containers/menu/Option\";\nimport Learning from \"containers/menu/Note\";\nimport ContextMenu from \"containers/commons/ContextMenu\";\nimport Snackbar from \"containers/commons/Snackbar\";\n// components\nimport ViewerWrapper from \"components/commons/ViewerWrapper\";\nimport LoadingView from \"LoadingView\";\n// slices\nimport store from \"slices\";\nimport { updateBook, updateCurrentPage, updateToc } from \"slices/book\";\n// hooks\nimport useMenu from \"lib/hooks/useMenu\";\nimport useHighlight from \"lib/hooks/useHighlight\";\n// styles\nimport \"lib/styles/readerStyle.css\";\nimport viewerLayout from \"lib/styles/viewerLayout\";\n// types\nimport { RootState } from \"slices\";\nimport { ViewerRef } from \"types\";\nimport Book, { BookStyle, BookOption } from \"types/book\";\nimport Page from \"types/page\";\nimport Toc from \"types/toc\";\n\nconst Reader = ({ url, loadingView }: Props) => {\n  const dispatch = useDispatch();\n  const currentLocation = useSelector<RootState, Page>(\n    (state) => state.book.currentLocation\n  );\n\n  const [epubUrl, setEpubUrl] = useState<string>(\"\");\n  const [bookTitle, setBookTitle] = useState<string>(\"\");\n\n  const viewerRef = useRef<ViewerRef | any>(null);\n  const navRef = useRef<HTMLDivElement | null>(null);\n  const optionRef = useRef<HTMLDivElement | null>(null);\n  const learningRef = useRef<HTMLDivElement | null>(null);\n\n  const [isContextMenu, setIsContextMenu] = useState<boolean>(false);\n\n  const [bookStyle, setBookStyle] = useState<BookStyle>({\n    fontSize: 18,\n    lineHeight: 1.4,\n    marginHorizontal: 15,\n    marginVertical: 5,\n  });\n\n  const [bookOption, setBookOption] = useState<BookOption>({\n    flow: \"paginated\",\n    resizeOnOrientationChange: true,\n    spread: \"auto\",\n  });\n\n  const [navControl, onNavToggle] = useMenu(navRef, 300);\n  const [optionControl, onOptionToggle, emitEvent] = useMenu(optionRef, 300);\n  const [learningControl, onLearningToggle] = useMenu(learningRef, 300);\n  const {\n    selection,\n    onSelection,\n    onClickHighlight,\n    onAddHighlight,\n    onRemoveHighlight,\n    onUpdateHighlight,\n  } = useHighlight(viewerRef, setIsContextMenu, bookStyle, bookOption.flow);\n\n  /**\n   * Change Epub book information\n   * @param book Epub Book Info\n   */\n  const onBookInfoChange = (book: Book) => dispatch(updateBook(book));\n\n  /**\n   * Change Epub location\n   * @param loc epubCFI or href\n   */\n  const onLocationChange = (loc: string) => {\n    if (!viewerRef.current) return;\n    viewerRef.current.setLocation(loc);\n  };\n\n  /**\n   * Move page\n   * @param type Direction\n   */\n  const onPageMove = (type: \"PREV\" | \"NEXT\") => {\n    const node = viewerRef.current;\n    if (!node || !node.prevPage || !node.nextPage) return;\n\n    type === \"PREV\" && node.prevPage();\n    type === \"NEXT\" && node.nextPage();\n  };\n\n  /**\n   * Set toc\n   * @param toc Table of Epub contents\n   */\n  const onTocChange = (toc: Toc[]) => dispatch(updateToc(toc));\n\n  /**\n   * Set Epub viewer styles\n   * @param bokkStyle_ viewer style\n   */\n  const onBookStyleChange = (bookStyle_: BookStyle) => setBookStyle(bookStyle_);\n\n  /**\n   * Set Epub viewer options\n   * @param bookOption_ viewer option\n   */\n  const onBookOptionChange = (bookOption_: BookOption) =>\n    setBookOption(bookOption_);\n\n  /**\n   * Change current page\n   * @param page Epub page\n   */\n  const onPageChange = (page: Page) => {\n    console.log(page);\n    dispatch(updateCurrentPage(page));\n  };\n\n  /**\n   * ContextMenu on\n   * @param cfiRange CfiRange\n   */\n  const onContextMenu = (cfiRange: string) => {\n    const result = onSelection(cfiRange);\n    setIsContextMenu(result);\n  };\n\n  /** ContextMenu off */\n  const onContextmMenuRemove = () => setIsContextMenu(false);\n\n  function getQueryVariable(variable: any) {\n    var query = window.location.search.substring(1);\n    console.log(query); //\"app=article&act=news_content&aid=160990\"\n    var vars = query.split(\"&\");\n    console.log(vars); //[ 'app=article', 'act=news_content', 'aid=160990' ]\n    for (var i = 0; i < vars.length; i++) {\n      var pair = vars[i].split(\"=\");\n      console.log(pair); //[ 'app', 'article' ][ 'act', 'news_content' ][ 'aid', '160990' ]\n      if (pair[0] === variable) {\n        return pair[1];\n      }\n    }\n    return false;\n  }\n\n  useEffect(() => {\n    const getBookDetails = async () => {\n      const queryStr = getQueryVariable(\"ref\");\n      const decryptedStr = await axios.post(\"http://35.203.148.45/decrypt\", {\n        payload: queryStr,\n      });\n      const bookId = decryptedStr.data;\n\n      try {\n        let config = {\n          headers: { \"x-api-key\": \"N8XUonMLYfahPHJ6q5EdP37STXgnCs4Z4thDa2dN\" },\n        };\n\n        const { data } = await axios.post(\n          \"https://1m2dc0uz5l.execute-api.ap-south-1.amazonaws.com/staging/api\",\n          {\n            method: \"bookdetails\",\n            book_id: bookId,\n            user_id: 53,\n          },\n          config\n        );\n\n        setEpubUrl(data.epub_url);\n        setBookTitle(data.title);\n      } catch {\n        // alert(\"inside catch\");\n      }\n    };\n    getBookDetails();\n  }, []);\n\n  return (\n    <>\n      <ViewerWrapper>\n        <Header\n          onNavToggle={onNavToggle}\n          onOptionToggle={onOptionToggle}\n          onLearningToggle={onLearningToggle}\n          bookTitle={bookTitle}\n        />\n\n        <ReactEpubViewer\n          url={epubUrl}\n          viewerLayout={viewerLayout}\n          viewerStyle={bookStyle}\n          viewerOption={bookOption}\n          onBookInfoChange={onBookInfoChange}\n          onPageChange={onPageChange}\n          onTocChange={onTocChange}\n          onSelection={onContextMenu}\n          loadingView={loadingView || <LoadingView />}\n          ref={viewerRef}\n        />\n\n        <Footer\n          title={currentLocation.chapterName}\n          nowPage={currentLocation.currentPage}\n          totalPage={currentLocation.totalPage}\n          onPageMove={onPageMove}\n        />\n      </ViewerWrapper>\n\n      <Nav\n        control={navControl}\n        onToggle={onNavToggle}\n        onLocation={onLocationChange}\n        ref={navRef}\n      />\n\n      <Option\n        control={optionControl}\n        bookStyle={bookStyle}\n        bookOption={bookOption}\n        bookFlow={bookOption.flow}\n        onToggle={onOptionToggle}\n        emitEvent={emitEvent}\n        onBookStyleChange={onBookStyleChange}\n        onBookOptionChange={onBookOptionChange}\n        ref={optionRef}\n      />\n\n      <Learning\n        control={learningControl}\n        onToggle={onLearningToggle}\n        onClickHighlight={onClickHighlight}\n        emitEvent={emitEvent}\n        viewerRef={viewerRef}\n        ref={learningRef}\n      />\n\n      <ContextMenu\n        active={isContextMenu}\n        viewerRef={viewerRef}\n        selection={selection}\n        onAddHighlight={onAddHighlight}\n        onRemoveHighlight={onRemoveHighlight}\n        onUpdateHighlight={onUpdateHighlight}\n        onContextmMenuRemove={onContextmMenuRemove}\n      />\n\n      <Snackbar />\n    </>\n  );\n};\n\nconst ReaderWrapper = ({ url, loadingView }: Props) => {\n  return (\n    <Provider store={store}>\n      <Reader url={url} loadingView={loadingView} />\n    </Provider>\n  );\n};\n\ninterface Props {\n  url: string;\n  loadingView?: React.ReactNode;\n}\n\nexport default ReaderWrapper;\n","import ReactDOM from \"react-dom\";\nimport Reader from \"containers/Reader\";\n\nconst EPUB_URL =\n  \"https://www.pustaka.co.in/tam/epub/detective/m7hzyp0x/kaliyuga-raavanan.epub\";\n\nReactDOM.render(<Reader url={EPUB_URL} />, document.getElementById(\"root\"));\n"],"sourceRoot":""}